"use strict";(self.webpackChunkstorybook_vue3=self.webpackChunkstorybook_vue3||[]).push([[368],{"./src/stories/TabelPro.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,__namedExportsOrder:()=>__namedExportsOrder,default:()=>TabelPro_stories});var vue_esm_bundler=__webpack_require__("./node_modules/.pnpm/vue@3.5.13_typescript@5.7.2/node_modules/vue/dist/vue.esm-bundler.js"),message=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/message/index.mjs"),components_button=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/button/index.mjs"),table=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/table/index.mjs"),icon=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/icon/index.mjs"),popconfirm=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/popconfirm/index.mjs"),components_image=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/image/index.mjs"),components_switch=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/switch/index.mjs"),input=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/input/index.mjs"),tag=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/tag/index.mjs"),dist=__webpack_require__("./node_modules/.pnpm/@element-plus+icons-vue@2.3.1_vue@3.5.13_typescript@5.7.2_/node_modules/@element-plus/icons-vue/dist/index.js");const _hoisted_1={class:"table-pro-wrapper"},_hoisted_2={key:1,class:"header-actions"},_hoisted_3=["onClick"],_hoisted_4={key:1,class:"header-actions"},_hoisted_5=["onClick"],_hoisted_6={key:1,class:"header-actions"},_hoisted_7=["onClick"],_hoisted_8=["href"],_hoisted_9={key:1,class:"header-actions"},_hoisted_10=["onClick"],_hoisted_11={key:1,class:"header-actions"},_hoisted_12=["onClick"],_hoisted_13={key:1,class:"header-actions"},_hoisted_14=["onClick"],_hoisted_15={key:1,class:"input-wrapper"},_hoisted_16={key:2,class:"tags-wrapper"},_hoisted_17={key:0,class:"tag-input-wrapper"},TableProvue_type_script_setup_true_lang_ts=(0,vue_esm_bundler.pM)({__name:"TablePro",props:{tableData:{},config:{},indexOffset:{},controllable:{type:Boolean,default:!0},selectedRows:{}},emits:["selection-change"],setup(__props,{emit:__emit}){const props=__props,emit=__emit,_preOriginOrderConfig=[],_preFixedColumns=[],_config=props.config.map(((column,index)=>{const key=column.key||`column-${index}`;return _preOriginOrderConfig.push(key),column.fixed&&_preFixedColumns.push(key),{...column,key}})),cacheKey=JSON.stringify(_preOriginOrderConfig),cacheFixedColumns=JSON.parse(localStorage.getItem(`fixedColumns-${cacheKey}`)||"null"),cacheLeftOrderConfig=JSON.parse(localStorage.getItem(`leftOrderConfig-${cacheKey}`)||"null"),tagInputValues=(0,vue_esm_bundler.KR)({}),tempBooleans=(0,vue_esm_bundler.KR)({}),tempFixedColumns=(0,vue_esm_bundler.KR)([]),fixedColumns=(0,vue_esm_bundler.KR)(cacheFixedColumns||_preFixedColumns),tempLeftOrderConfig=(0,vue_esm_bundler.KR)([]),leftOrderConfig=(0,vue_esm_bundler.KR)(cacheLeftOrderConfig||[]),originOrderConfig=(0,vue_esm_bundler.KR)(_preOriginOrderConfig),isEditingOrder=(0,vue_esm_bundler.KR)(!1),selectedRows=(0,vue_esm_bundler.lW)(props.selectedRows||[]),finalConfig=(0,vue_esm_bundler.EW)((()=>{const result=[];return fixedColumns.value.map((key=>{result.push(_config.find((column=>column.key===key)))})),leftOrderConfig.value.map((key=>{checkIfFixed(key)||result.push(_config.find((column=>column.key===key)))})),originOrderConfig.value.map((key=>{if(checkIfFixed(key)||-1!==leftOrderConfig.value.indexOf(key))return;const keyOne=_config.find((column=>column.key===key));keyOne&&result.push(keyOne)})),result})),toggleEditingOrder=open=>{props.controllable&&isEditingOrder.value!==open&&(isEditingOrder.value=void 0!==open?open:!isEditingOrder.value,isEditingOrder.value&&(tempFixedColumns.value=[...fixedColumns.value],tempLeftOrderConfig.value=[...leftOrderConfig.value]))},getRowColumnKey=(row,column,index)=>`${index}-${row.id||""}-${column.key||""}`,checkFnAndReturnVal=(val,row,argsValue)=>"function"==typeof val?val(row,argsValue):val,isAllSelected=(0,vue_esm_bundler.EW)((()=>props.tableData.length>0&&selectedRows.value.length===props.tableData.length)),isIndeterminate=(0,vue_esm_bundler.EW)((()=>selectedRows.value.length>0&&selectedRows.value.length<props.tableData.length)),toggleSelectAll=()=>{isAllSelected.value?selectedRows.value=[]:selectedRows.value=[...props.tableData],handleSelectionChange(selectedRows.value)},handleSelectionChange=selection=>{emit("selection-change",selection)},formatCellValue=(value,column,row)=>column.formatter?column.formatter(value,row):null==value||""===value?column.defaultValue||"":column.dictionary&&value in column.dictionary?column.dictionary[value]:value,formatTagValue=(value,column)=>"object"==typeof value&&null!==value?value[column.tag.label]:formatCellValue(value,column),toggleLeft=(key="")=>{if(checkIfFixed(key,!0))return;const index=tempLeftOrderConfig.value.indexOf(key);-1===index?tempLeftOrderConfig.value.push(key):tempLeftOrderConfig.value.splice(index,1)},toggleFixed=(key="")=>{const index=tempFixedColumns.value.indexOf(key);-1===index?tempFixedColumns.value.push(key):tempFixedColumns.value.splice(index,1)},getOrderIndex=(key="")=>{let index=tempFixedColumns.value.indexOf(key);return-1===index&&(index=tempLeftOrderConfig.value.indexOf(key),index=-1!==index?index+tempFixedColumns.value.length:index),index+1},checkIfFixed=(key="",isTemp)=>-1!==(isTemp?tempFixedColumns.value:fixedColumns.value).indexOf(key),resetConfig=()=>{fixedColumns.value=_preFixedColumns,leftOrderConfig.value=[],localStorage.setItem(`fixedColumns-${cacheKey}`,JSON.stringify(fixedColumns.value)),localStorage.setItem(`leftOrderConfig-${cacheKey}`,JSON.stringify(leftOrderConfig.value)),toggleEditingOrder(!1)},confirmOrder=()=>{fixedColumns.value=[...tempFixedColumns.value],leftOrderConfig.value=[...tempLeftOrderConfig.value],localStorage.setItem(`fixedColumns-${cacheKey}`,JSON.stringify(fixedColumns.value)),localStorage.setItem(`leftOrderConfig-${cacheKey}`,JSON.stringify(leftOrderConfig.value)),toggleEditingOrder(!1)};return(_ctx,_cache)=>{const _component_el_checkbox=(0,vue_esm_bundler.g2)("el-checkbox");return(0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_1,[(0,vue_esm_bundler.Lk)("div",{class:(0,vue_esm_bundler.C4)(["table-order-buttons",{active:isEditingOrder.value}])},[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(components_button.S2),{size:"small",type:"primary",onClick:confirmOrder},{default:(0,vue_esm_bundler.k6)((()=>_cache[4]||(_cache[4]=[(0,vue_esm_bundler.eW)("确定")]))),_:1}),(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(components_button.S2),{size:"small",type:"info",onClick:_cache[0]||(_cache[0]=$event=>toggleEditingOrder(!1))},{default:(0,vue_esm_bundler.k6)((()=>_cache[5]||(_cache[5]=[(0,vue_esm_bundler.eW)("取消")]))),_:1}),(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(components_button.S2),{size:"small",onClick:resetConfig},{default:(0,vue_esm_bundler.k6)((()=>_cache[6]||(_cache[6]=[(0,vue_esm_bundler.eW)("恢复默认")]))),_:1})],2),(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(table.Up),{data:_ctx.tableData,onHeaderClick:_cache[3]||(_cache[3]=$event=>toggleEditingOrder(!0)),border:""},{default:(0,vue_esm_bundler.k6)((()=>[((0,vue_esm_bundler.uX)(!0),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,null,(0,vue_esm_bundler.pI)(finalConfig.value,(column=>((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,{key:column.key||column.type},["selection"===column.type?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:0,width:column.width||40,"min-width":column.minWidth,align:column.align,fixed:checkIfFixed(column.key)},{header:(0,vue_esm_bundler.k6)((()=>[column.label?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)(_component_el_checkbox,{key:0,modelValue:isAllSelected.value,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>isAllSelected.value=$event),indeterminate:isIndeterminate.value,onChange:toggleSelectAll},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.eW)((0,vue_esm_bundler.v_)(column.label),1)])),_:2},1032,["modelValue","indeterminate"])):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)(_component_el_checkbox,{key:1,modelValue:isAllSelected.value,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>isAllSelected.value=$event),indeterminate:isIndeterminate.value,onChange:toggleSelectAll},null,8,["modelValue","indeterminate"]))])),default:(0,vue_esm_bundler.k6)((({row})=>[(0,vue_esm_bundler.bF)(_component_el_checkbox,{disabled:!checkFnAndReturnVal(column.selectable,row),"model-value":!!selectedRows.value.find((s=>s[column.uuid]===row[column.uuid])),onChange:$event=>((row,column)=>{const index=selectedRows.value.findIndex((item=>item[column.uuid]===row[column.uuid]));index>-1?selectedRows.value.splice(index,1):selectedRows.value.push(row),handleSelectionChange(selectedRows.value)})(row,column)},null,8,["disabled","model-value","onChange"])])),_:2},1032,["width","min-width","align","fixed"])):"index"===column.type?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:1,type:"index",index:_ctx.indexOffset||0,label:column.label,width:column.width,"min-width":column.minWidth,align:column.align,fixed:checkIfFixed(column.key)},null,8,["index","label","width","min-width","align","fixed"])):column.buttons?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:2,label:column.label,width:column.width,"min-width":column.minWidth,align:column.align,fixed:checkIfFixed(column.key)},{header:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.Lk)("div",{style:(0,vue_esm_bundler.Tr)(`align:${column.align}`)},(0,vue_esm_bundler.v_)(column.label),5),column.headerSlot?(0,vue_esm_bundler.RG)(_ctx.$slots,column.headerSlot,{key:0}):(0,vue_esm_bundler.Q3)("",!0),isEditingOrder.value?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_2,[getOrderIndex(column.key)>0?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",{key:0,class:(0,vue_esm_bundler.C4)(["column-order-index",{"is-fixed":checkIfFixed(column.key,!0)}]),onClick:$event=>toggleLeft(column.key)},(0,vue_esm_bundler.v_)(getOrderIndex(column.key)),11,_hoisted_3)):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(icon.tk),{key:1,color:"#fff",size:"20",onClick:$event=>toggleLeft(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.V6m))])),_:2},1032,["onClick"])),(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(icon.tk),{class:(0,vue_esm_bundler.C4)({active:checkIfFixed(column.key,!0)}),color:"#fff",size:"20",onClick:$event=>toggleFixed(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.c_I))])),_:2},1032,["class","onClick"])])):(0,vue_esm_bundler.Q3)("",!0)])),default:(0,vue_esm_bundler.k6)((({row})=>[((0,vue_esm_bundler.uX)(!0),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,null,(0,vue_esm_bundler.pI)(column.buttons,((btn,index)=>((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,{key:index},[btn.popconfirmTitle?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(popconfirm.n3),{key:0,title:checkFnAndReturnVal(btn.popconfirmTitle,row),"confirm-button-text":btn.popconfirmBtnText,"cancel-button-text":btn.popcancelBtnText,icon:btn.popconfirmIcon,"icon-color":btn.popconfirmIconColor,width:btn.width,onConfirm:$event=>btn.click(row)},{reference:(0,vue_esm_bundler.k6)((()=>[btn.text?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(components_button.S2),{key:0,type:checkFnAndReturnVal(btn.type,row),icon:checkFnAndReturnVal(btn.icon,row),disabled:btn.disabled?.(row),size:btn.size,round:btn.round},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.eW)((0,vue_esm_bundler.v_)(checkFnAndReturnVal(btn.text,row)),1)])),_:2},1032,["type","icon","disabled","size","round"])):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(components_button.S2),{key:1,type:checkFnAndReturnVal(btn.type,row),icon:checkFnAndReturnVal(btn.icon,row),disabled:btn.disabled?.(row),size:btn.size,circle:btn.circle},null,8,["type","icon","disabled","size","circle"]))])),_:2},1032,["title","confirm-button-text","cancel-button-text","icon","icon-color","width","onConfirm"])):btn.text?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(components_button.S2),{key:1,type:checkFnAndReturnVal(btn.type,row),icon:checkFnAndReturnVal(btn.icon,row),disabled:btn.disabled?.(row),size:btn.size,round:btn.round,onClick:$event=>btn.click(row)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.eW)((0,vue_esm_bundler.v_)(checkFnAndReturnVal(btn.text,row)),1)])),_:2},1032,["type","icon","disabled","size","round","onClick"])):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(components_button.S2),{key:2,type:checkFnAndReturnVal(btn.type,row),icon:checkFnAndReturnVal(btn.icon,row),disabled:btn.disabled?.(row),size:btn.size,circle:btn.circle,onClick:$event=>btn.click(row)},null,8,["type","icon","disabled","size","circle","onClick"]))],64)))),128))])),_:2},1032,["label","width","min-width","align","fixed"])):"image"===column.type?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:3,prop:column.key,label:column.label,width:column.width,"min-width":column.minWidth,align:column.align,fixed:checkIfFixed(column.key)},{header:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.Lk)("div",{style:(0,vue_esm_bundler.Tr)(`align:${column.align}`)},(0,vue_esm_bundler.v_)(column.label),5),column.headerSlot?(0,vue_esm_bundler.RG)(_ctx.$slots,column.headerSlot,{key:0}):(0,vue_esm_bundler.Q3)("",!0),isEditingOrder.value?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_4,[getOrderIndex(column.key)>0?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",{key:0,class:(0,vue_esm_bundler.C4)(["column-order-index",{"is-fixed":checkIfFixed(column.key,!0)}]),onClick:$event=>toggleLeft(column.key)},(0,vue_esm_bundler.v_)(getOrderIndex(column.key)),11,_hoisted_5)):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(icon.tk),{key:1,color:"#fff",size:"20",onClick:$event=>toggleLeft(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.V6m))])),_:2},1032,["onClick"])),(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(icon.tk),{class:(0,vue_esm_bundler.C4)({active:checkIfFixed(column.key,!0)}),color:"#fff",size:"20",onClick:$event=>toggleFixed(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.c_I))])),_:2},1032,["class","onClick"])])):(0,vue_esm_bundler.Q3)("",!0)])),default:(0,vue_esm_bundler.k6)((({row})=>[column.key&&row[column.key]?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(components_image.Zq),{key:0,src:row[column.key],"preview-src-list":column.preview?[row[column.key]]:[],"preview-teleported":"",style:(0,vue_esm_bundler.Tr)({width:column.size?.width+"px",height:column.size?.height+"px"})},null,8,["src","preview-src-list","style"])):(0,vue_esm_bundler.Q3)("",!0)])),_:2},1032,["prop","label","width","min-width","align","fixed"])):"link"===column.type?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:4,prop:column.key,label:column.label,width:column.width,"min-width":column.minWidth,align:column.align,fixed:checkIfFixed(column.key)},{header:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.Lk)("div",{style:(0,vue_esm_bundler.Tr)(`align:${column.align}`)},(0,vue_esm_bundler.v_)(column.label),5),column.headerSlot?(0,vue_esm_bundler.RG)(_ctx.$slots,column.headerSlot,{key:0}):(0,vue_esm_bundler.Q3)("",!0),isEditingOrder.value?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_6,[getOrderIndex(column.key)>0?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",{key:0,class:(0,vue_esm_bundler.C4)(["column-order-index",{"is-fixed":checkIfFixed(column.key,!0)}]),onClick:$event=>toggleLeft(column.key)},(0,vue_esm_bundler.v_)(getOrderIndex(column.key)),11,_hoisted_7)):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(icon.tk),{key:1,color:"#fff",size:"20",onClick:$event=>toggleLeft(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.V6m))])),_:2},1032,["onClick"])),(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(icon.tk),{class:(0,vue_esm_bundler.C4)({active:checkIfFixed(column.key,!0)}),color:"#fff",size:"20",onClick:$event=>toggleFixed(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.c_I))])),_:2},1032,["class","onClick"])])):(0,vue_esm_bundler.Q3)("",!0)])),default:(0,vue_esm_bundler.k6)((({row})=>[(0,vue_esm_bundler.Lk)("a",{class:"element-to-lj",href:(column.checkSSL&&column.checkSSL(row)?"http://":"https://")+row[column.key],target:"_blank"},(0,vue_esm_bundler.v_)(row[column.key]),9,_hoisted_8)])),_:2},1032,["prop","label","width","min-width","align","fixed"])):column.slot?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:5,label:column.label,width:column.width,"min-width":column.minWidth,align:column.align,fixed:checkIfFixed(column.key)},{header:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.Lk)("div",{style:(0,vue_esm_bundler.Tr)(`align:${column.align}`)},(0,vue_esm_bundler.v_)(column.label),5),column.headerSlot?(0,vue_esm_bundler.RG)(_ctx.$slots,column.headerSlot,{key:0}):(0,vue_esm_bundler.Q3)("",!0),isEditingOrder.value?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_9,[getOrderIndex(column.key)>0?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",{key:0,class:(0,vue_esm_bundler.C4)(["column-order-index",{"is-fixed":checkIfFixed(column.key,!0)}]),onClick:$event=>toggleLeft(column.key)},(0,vue_esm_bundler.v_)(getOrderIndex(column.key)),11,_hoisted_10)):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(icon.tk),{key:1,color:"#fff",size:"20",onClick:$event=>toggleLeft(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.V6m))])),_:2},1032,["onClick"])),(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(icon.tk),{class:(0,vue_esm_bundler.C4)({active:checkIfFixed(column.key,!0)}),color:"#fff",size:"20",onClick:$event=>toggleFixed(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.c_I))])),_:2},1032,["class","onClick"])])):(0,vue_esm_bundler.Q3)("",!0)])),default:(0,vue_esm_bundler.k6)((({row})=>[(0,vue_esm_bundler.RG)(_ctx.$slots,column.slot,{row})])),_:2},1032,["label","width","min-width","align","fixed"])):column.children?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:6,label:column.label,width:column.width,"min-width":column.minWidth,align:column.align,fixed:checkIfFixed(column.key)},{header:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.Lk)("div",{style:(0,vue_esm_bundler.Tr)(`align:${column.align}`)},(0,vue_esm_bundler.v_)(column.label),5),column.headerSlot?(0,vue_esm_bundler.RG)(_ctx.$slots,column.headerSlot,{key:0}):(0,vue_esm_bundler.Q3)("",!0),isEditingOrder.value?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_11,[getOrderIndex(column.key)>0?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",{key:0,class:(0,vue_esm_bundler.C4)(["column-order-index",{"is-fixed":checkIfFixed(column.key,!0)}]),onClick:$event=>toggleLeft(column.key)},(0,vue_esm_bundler.v_)(getOrderIndex(column.key)),11,_hoisted_12)):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(icon.tk),{key:1,color:"#fff",size:"20",onClick:$event=>toggleLeft(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.V6m))])),_:2},1032,["onClick"])),(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(icon.tk),{class:(0,vue_esm_bundler.C4)({active:checkIfFixed(column.key,!0)}),color:"#fff",size:"20",onClick:$event=>toggleFixed(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.c_I))])),_:2},1032,["class","onClick"])])):(0,vue_esm_bundler.Q3)("",!0)])),default:(0,vue_esm_bundler.k6)((()=>[((0,vue_esm_bundler.uX)(!0),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,null,(0,vue_esm_bundler.pI)(column.children,(child=>((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:child.key,prop:child.key,label:child.label,width:child.width},null,8,["prop","label","width"])))),128))])),_:2},1032,["label","width","min-width","align","fixed"])):(0,vue_esm_bundler.bo)(((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:7,prop:column.key,label:column.label,width:column.width,"min-width":column.minWidth,align:column.align,sortable:column.sortable,filters:column.filters,"filter-method":column.filterMethod,fixed:checkIfFixed(column.key)},(0,vue_esm_bundler.eX)({header:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.Lk)("div",{style:(0,vue_esm_bundler.Tr)(`align:${column.align}`)},(0,vue_esm_bundler.v_)(column.label),5),column.headerSlot?(0,vue_esm_bundler.RG)(_ctx.$slots,column.headerSlot,{key:0}):(0,vue_esm_bundler.Q3)("",!0),isEditingOrder.value?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_13,[getOrderIndex(column.key)>0?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",{key:0,class:(0,vue_esm_bundler.C4)(["column-order-index",{"is-fixed":checkIfFixed(column.key,!0)}]),onClick:$event=>toggleLeft(column.key)},(0,vue_esm_bundler.v_)(getOrderIndex(column.key)),11,_hoisted_14)):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(icon.tk),{key:1,color:"#fff",size:"20",onClick:$event=>toggleLeft(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.V6m))])),_:2},1032,["onClick"])),(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(icon.tk),{class:(0,vue_esm_bundler.C4)({active:checkIfFixed(column.key,!0)}),color:"#fff",size:"20",onClick:$event=>toggleFixed(column.key)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(dist.c_I))])),_:2},1032,["class","onClick"])])):(0,vue_esm_bundler.Q3)("",!0)])),_:2},[column.key?{name:"default",fn:(0,vue_esm_bundler.k6)((({row,$index})=>[column.switch?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(components_switch.qi),{key:0,modelValue:row[column.key],"onUpdate:modelValue":$event=>row[column.key]=$event,style:(0,vue_esm_bundler.Tr)({"--el-switch-on-color":column.switch?.onColor||"#13ce66","--el-switch-off-color":column.switch?.offColor||"#ff4949"}),"active-value":column.switch?.activeValue,"inactive-value":column.switch?.inactiveValue,"active-text":column.switch?.activeText,"inactive-text":column.switch?.inactiveText,"inline-prompt":"",loading:row.loading,onChange:val=>column.switch?.change(val,val===column.switch?.activeValue?column.switch?.inactiveValue:column.switch?.activeValue,row)},null,8,["modelValue","onUpdate:modelValue","style","active-value","inactive-value","active-text","inactive-text","loading","onChange"])):column.input?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_15,[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(input.WK),{modelValue:row[column.key],"onUpdate:modelValue":$event=>row[column.key]=$event,type:column.input?.type||"text",placeholder:column.input?.placeholder||"请输入",maxlength:column.input?.maxlength,"show-word-limit":!!column.input?.maxlength,disabled:column.input?.disabled?.(row),onFocus:$event=>column.key&&!row[`${column.key}-old`]&&(row[`${column.key}-old`]=row[column.key]),onBlur:$event=>column.key&&row[`${column.key}-old`].toString()===row[column.key]&&(row[`${column.key}-old`]=void 0)},null,8,["modelValue","onUpdate:modelValue","type","placeholder","maxlength","show-word-limit","disabled","onFocus","onBlur"]),void 0!==row[`${column.key}-old`]&&row[`${column.key}-old`]!==row[column.key]?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,{key:0},[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(components_button.S2),{type:"primary",size:"small",onClick:$event=>column.input?.change(row[column.key],row[`${column.key}-old`],row)},{default:(0,vue_esm_bundler.k6)((()=>_cache[7]||(_cache[7]=[(0,vue_esm_bundler.eW)(" 确认 ")]))),_:2},1032,["onClick"]),(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(components_button.S2),{size:"small",onClick:$event=>row[column.key]=row[`${column.key}-old`]},{default:(0,vue_esm_bundler.k6)((()=>_cache[8]||(_cache[8]=[(0,vue_esm_bundler.eW)("取消")]))),_:2},1032,["onClick"])],64)):(0,vue_esm_bundler.Q3)("",!0)])):column.tag?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_16,[Array.isArray(row[column.key])?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,{key:0},[((0,vue_esm_bundler.uX)(!0),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,null,(0,vue_esm_bundler.pI)(row[column.key],((value,index)=>((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(tag.u),{key:index,type:checkFnAndReturnVal(column.tag.type,row,value),effect:column.tag.effect||"dark",closable:column.tag.closable,onClose:$event=>(async(row,column,index)=>{if(!column.key)return;const value=row[column.key][index];if(column.tag?.beforeRemove&&!await column.tag.beforeRemove(index,value,row))return;const newValue=[...row[column.key]];newValue.splice(index,1),row[column.key]=newValue,column.tag?.onRemove?.(index,value,row)})(row,column,index)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.eW)((0,vue_esm_bundler.v_)(formatTagValue(value,column)),1)])),_:2},1032,["type","effect","closable","onClose"])))),128)),column.tag.addable?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_17,[tempBooleans.value[getRowColumnKey(row,column,$index)]?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(input.WK),{key:0,id:getRowColumnKey(row,column,$index),modelValue:tagInputValues.value[getRowColumnKey(row,column,$index)],"onUpdate:modelValue":$event=>tagInputValues.value[getRowColumnKey(row,column,$index)]=$event,placeholder:column.tag.addPlaceholder||"请输入",size:"small",onKeyup:(0,vue_esm_bundler.jR)(($event=>(async(row,column,index)=>{if(!column.key)return;const inputKey=getRowColumnKey(row,column,index),value=tagInputValues.value[inputKey]?.trim();if(!value)return;if(Array.isArray(row[column.key])&&row[column.key].includes(value))return void message.nk.warning("标签已存在");if(column.tag?.beforeAdd&&!await column.tag.beforeAdd(value,row))return;Array.isArray(row[column.key])||(row[column.key]=[]);const newValue=[...row[column.key],value];row[column.key]=newValue,column.tag?.onAdd?.(value,row),tagInputValues.value[inputKey]=""})(row,column,$index)),["enter"]),onBlur:$event=>((row,column,index)=>{const inputKey=getRowColumnKey(row,column,index);!tagInputValues.value[inputKey]&&(tempBooleans.value[inputKey]=!1)})(row,column,$index)},null,8,["id","modelValue","onUpdate:modelValue","placeholder","onKeyup","onBlur"])):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(components_button.S2),{key:1,size:"small",onClick:event=>((row,column,index)=>{const inputKey=getRowColumnKey(row,column,index);tempBooleans.value[inputKey]=!0,(0,vue_esm_bundler.dY)((()=>{const input=document.getElementById(inputKey);input?.focus()}))})(row,column,$index)},{default:(0,vue_esm_bundler.k6)((()=>_cache[9]||(_cache[9]=[(0,vue_esm_bundler.eW)(" + 新标签 ")]))),_:2},1032,["onClick"]))])):(0,vue_esm_bundler.Q3)("",!0)],64)):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(tag.u),{key:1,type:checkFnAndReturnVal(column.tag.type,row,row[column.key]),effect:column.tag.effect||"dark"},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.eW)((0,vue_esm_bundler.v_)(formatTagValue(row[column.key],column)),1)])),_:2},1032,["type","effect"]))])):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("span",{key:3,style:(0,vue_esm_bundler.Tr)(column.cellStyle?.(row,column))},(0,vue_esm_bundler.v_)(column.key?formatCellValue(row[column.key],column,row):""),5))])),key:"0"}:void 0]),1032,["prop","label","width","min-width","align","sortable","filters","filter-method","fixed"])),[[vue_esm_bundler.aG,!column.hidden]])],64)))),128))])),_:3},8,["data"])])}}});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),TableProvue_type_style_index_0_id_f40ffffc_scoped_true_lang_css=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.97.1_esbuild@0.24.0_/node_modules/css-loader/dist/cjs.js??clonedRuleSet-8.use[1]!./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/.pnpm/postcss-loader@8.1.1_postcss@8.4.49_typescript@5.7.2_webpack@5.97.1_esbuild@0.24.0_/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[0]!./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/index.js??ruleSet[0]!./src/components/TablePro.vue?vue&type=style&index=0&id=f40ffffc&scoped=true&lang=css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(TableProvue_type_style_index_0_id_f40ffffc_scoped_true_lang_css.A,options);TableProvue_type_style_index_0_id_f40ffffc_scoped_true_lang_css.A&&TableProvue_type_style_index_0_id_f40ffffc_scoped_true_lang_css.A.locals&&TableProvue_type_style_index_0_id_f40ffffc_scoped_true_lang_css.A.locals;const __exports__=(0,__webpack_require__("./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/exportHelper.js").A)(TableProvue_type_script_setup_true_lang_ts,[["__scopeId","data-v-f40ffffc"]]),TablePro=__exports__;__exports__.__docgenInfo={exportName:"default",displayName:"TablePro",description:"",tags:{},props:[{name:"tableData",required:!0,type:{name:"Array",elements:[{name:"Record",elements:[{name:"string"},{name:"any"}]}]}},{name:"config",required:!0,type:{name:"Array",elements:[{name:"TableColumn"}]}},{name:"indexOffset",required:!1,type:{name:"number"}},{name:"controllable",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"selectedRows",required:!1,type:{name:"Array",elements:[{name:"Record",elements:[{name:"string"},{name:"any"}]}]}}],events:[{name:"selection-change"}],slots:[{name:"column.headerSlot",scoped:!0,bindings:[{name:"name",title:"binding"}]},{name:"column.slot",scoped:!0,bindings:[{name:"name",title:"binding"},{name:"row",title:"binding"}]}],sourceFiles:["/Users/future/Desktop/projects/storybook-vue3/src/components/TablePro.vue"]};const TabelPro_stories={title:"Components/TablePro",component:TablePro,tags:["autodocs"]},Basic=(args=>({components:{TablePro},setup:()=>({args,handleTagAdd:({row,column,value,newValue})=>{console.log("添加标签:",{row,column,value,newValue})},handleTagRemove:({row,column,index,value,newValue})=>{console.log("删除标签:",{row,column,index,value,newValue})}}),template:'\n    <TablePro \n      v-bind="args" \n      @tag-add="handleTagAdd"\n      @tag-remove="handleTagRemove"\n    />\n  '})).bind({});Basic.args={tableData:[{id:1,name:"张三",sex:1,age:25,score:95,createdAt:"2024-03-20T10:00:00",status:!0,editable:!0,province:"广东",city:"深圳",region:"南方",images:"https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png",tags:["前端","Vue","React"],roles:[{name:"管理员",type:"danger"},{name:"开发者",type:"success"}],skills:[{label:"Vue",level:"expert"},{label:"React",level:"intermediate"},{label:"Angular",level:"beginner"}]},{id:2,name:"李四",sex:0,age:30,score:85,createdAt:"2024-03-19T15:30:00",status:!1,editable:!1,province:"北京",city:"北京",region:"",images:"https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png",tags:["后端","Java","Python"],roles:[{name:"测试",type:"warning"}],skills:[{label:"Java",level:"expert"},{label:"Python",level:"intermediate"}]}],config:[{type:"selection",width:50},{type:"index",label:"#",width:50,fixed:!0},{key:"name",label:"姓名",width:100,align:"right",fixed:!0},{key:"sex",label:"性别",dictionary:{0:"女",1:"男"},filters:[{text:"男",value:1},{text:"女",value:0}],filterMethod:(value,row)=>row.sex===value},{key:"tags",label:"技术标签",width:300,tag:{type:(row,value)=>({前端:"success",后端:"info",Vue:"success",React:"info",Java:"warning",Python:"warning"}[value]||"info"),effect:"light",closable:!0,addable:!0,addPlaceholder:"输入技术标签",beforeAdd:(value,row)=>!(value.length>10)||(message.nk.warning("标签长度不能超过10个字符"),!1),onAdd:(value,row)=>{console.log("标签已添加:",value,row)},onRemove:(index,value,row)=>{console.log("标签已删除:",index,value,row)}}},{key:"roles",label:"角色",width:200,tag:{label:"name",type:(row,value)=>value.type,effect:"dark",closable:!0,addable:!0,addPlaceholder:"输入角色名称",onAdd:(value,row)=>{console.log("角色已添加:",value,row)},onRemove:(index,value,row)=>{console.log("角色已删除:",index,value,row)}}},{key:"skills",label:"技能",width:300,tag:{label:"label",type:(row,value)=>({expert:"success",intermediate:"warning",beginner:"info"}[value.level]),effect:"plain",closable:!0,onRemove:(index,value,row)=>{console.log("技能已删除:",index,value,row)}}},{key:"createdAt",label:"创建时间",formatter:value=>new Date(value).toLocaleDateString()},{key:"age",label:"年龄",sortable:!0,cellStyle:row=>row.age<27?{color:"green"}:{color:"red"}},{key:"region",label:"区域",defaultValue:"暂无"},{key:"score",label:"分数",input:{disabled:row=>!row.editable,change:(newVal,oldVal,row)=>{console.log("分数改变:",newVal,row),setTimeout((()=>row.score=oldVal),500)}},width:200},{key:"address",label:"地址",children:[{key:"province",label:"省"},{key:"city",label:"市"}]},{key:"status",label:"状态",switch:{change:(val,row)=>console.log("状态改变:",val,row)}},{key:"images",label:"图片",type:"image",preview:!0,size:{width:"auto",height:80}},{label:"操作",width:200,buttons:[{text:"编辑",type:"primary",click:row=>console.log("编辑:",row),disabled:row=>!row.editable},{text:"删除",type:"danger",popconfirmText:"确认删除此记录？",click:row=>console.log("删除:",row)}]}],indexOffset:10};const __namedExportsOrder=["Basic"];Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:'args => ({\n  components: {\n    TablePro\n  },\n  setup() {\n    const handleTagAdd = ({\n      row,\n      column,\n      value,\n      newValue\n    }) => {\n      console.log(\'添加标签:\', {\n        row,\n        column,\n        value,\n        newValue\n      });\n    };\n    const handleTagRemove = ({\n      row,\n      column,\n      index,\n      value,\n      newValue\n    }) => {\n      console.log(\'删除标签:\', {\n        row,\n        column,\n        index,\n        value,\n        newValue\n      });\n    };\n    return {\n      args,\n      handleTagAdd,\n      handleTagRemove\n    };\n  },\n  template: `\n    <TablePro \n      v-bind="args" \n      @tag-add="handleTagAdd"\n      @tag-remove="handleTagRemove"\n    />\n  `\n})',...Basic.parameters?.docs?.source}}}},"./node_modules/.pnpm/css-loader@6.11.0_webpack@5.97.1_esbuild@0.24.0_/node_modules/css-loader/dist/cjs.js??clonedRuleSet-8.use[1]!./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/.pnpm/postcss-loader@8.1.1_postcss@8.4.49_typescript@5.7.2_webpack@5.97.1_esbuild@0.24.0_/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[0]!./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/index.js??ruleSet[0]!./src/components/TablePro.vue?vue&type=style&index=0&id=f40ffffc&scoped=true&lang=css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.97.1_esbuild@0.24.0_/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.97.1_esbuild@0.24.0_/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"\n.table-pro-wrapper[data-v-f40ffffc] {\n    position: relative;\n    height: -moz-fit-content;\n    height: fit-content;\n    overflow: hidden;\n}\n.table-order-buttons[data-v-f40ffffc] {\n    display: none;\n}\n.table-order-buttons.active[data-v-f40ffffc] {\n    position: absolute;\n    display: flex;\n    background-color: rgba(0, 0, 0, 0.3);\n    gap: 8px;\n    bottom: 0;\n    right: 0;\n    z-index: 10;\n    padding: 4px 8px;\n}\n.el-table[data-v-f40ffffc] {\n    width: 100%;\n    height: 100%;\n    font-size: 14px;\n}\n.input-wrapper[data-v-f40ffffc] {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n.input-wrapper .el-button + .el-button[data-v-f40ffffc] {\n    margin-left: 0;\n}\n.tags-wrapper[data-v-f40ffffc] {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 4px;\n    align-items: center;\n}\n.tags-wrapper .el-tag[data-v-f40ffffc] {\n    margin: 0;\n    cursor: default;\n    font-size: 12px;\n}\n.tags-wrapper .el-tag.is-closable[data-v-f40ffffc] {\n    cursor: pointer;\n}\n.tag-input-wrapper[data-v-f40ffffc] {\n    width: 70px;\n    line-height: 24px;\n}\n.tag-input-wrapper .el-input[data-v-f40ffffc],\n  .tag-input-wrapper .el-button[data-v-f40ffffc] {\n    width: 100%;\n}\n.el-table .el-table__cell .header-actions[data-v-f40ffffc] {\n    position: absolute;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 8px;\n    background-color: rgba(0, 0, 0, 0.2);\n}\n.el-table .el-table__cell .header-actions .el-icon[data-v-f40ffffc] {\n    background-color: #909399;\n    border-radius: 50%;\n    padding: 4px;\n    cursor: pointer;\n}\n.el-table .el-table__cell .header-actions .el-icon.active[data-v-f40ffffc] {\n    background-color: #303133;\n}\n.el-table .el-table__cell .header-actions .el-icon[data-v-f40ffffc]:hover,\n  .el-table .el-table__cell .header-actions .el-icon.active[data-v-f40ffffc]:hover {\n    background-color: #4f5562;\n}\n.el-table .el-table__cell .header-actions .column-order-index[data-v-f40ffffc] {\n    background-color: #303133;\n    border-radius: 50%;\n    width: 20px;\n    height: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    color: #fff;\n    position: relative;\n}\n.el-table .el-table__cell .header-actions .column-order-index.is-fixed[data-v-f40ffffc] {\n    opacity: 0.6;\n    cursor: not-allowed;\n}\n.el-table .el-table__cell .header-actions .column-order-index[data-v-f40ffffc]:not(.is-fixed):hover::before {\n    content: 'X';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    line-height: 20px;\n    text-align: center;\n    border-radius: 50%;\n    font-size: 12px;\n    background-color: #4f5562;\n}\n","",{version:3,sources:["webpack://./src/components/TablePro.vue"],names:[],mappings:";AA+4BE;IACE,kBAAkB;IAClB,wBAAmB;IAAnB,mBAAmB;IACnB,gBAAgB;AAClB;AACA;IACE,aAAa;AACf;AACA;IACE,kBAAkB;IAClB,aAAa;IACb,oCAAoC;IACpC,QAAQ;IACR,SAAS;IACT,QAAQ;IACR,WAAW;IACX,gBAAgB;AAClB;AACA;IACE,WAAW;IACX,YAAY;IACZ,eAAe;AACjB;AACA;IACE,aAAa;IACb,mBAAmB;IACnB,QAAQ;AACV;AACA;IACE,cAAc;AAChB;AACA;IACE,aAAa;IACb,eAAe;IACf,QAAQ;IACR,mBAAmB;AACrB;AACA;IACE,SAAS;IACT,eAAe;IACf,eAAe;AACjB;AACA;IACE,eAAe;AACjB;AACA;IACE,WAAW;IACX,iBAAiB;AACnB;AACA;;IAEE,WAAW;AACb;AACA;IACE,kBAAkB;IAClB,aAAa;IACb,WAAW;IACX,YAAY;IACZ,MAAM;IACN,OAAO;IACP,8BAA8B;IAC9B,mBAAmB;IACnB,cAAc;IACd,oCAAoC;AACtC;AACA;IACE,yBAAyB;IACzB,kBAAkB;IAClB,YAAY;IACZ,eAAe;AACjB;AAEA;IACE,yBAAyB;AAC3B;AACA;;IAEE,yBAAyB;AAC3B;AACA;IACE,yBAAyB;IACzB,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,aAAa;IACb,uBAAuB;IACvB,mBAAmB;IACnB,eAAe;IACf,WAAW;IACX,kBAAkB;AACpB;AACA;IACE,YAAY;IACZ,mBAAmB;AACrB;AACA;IACE,YAAY;IACZ,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,iBAAiB;IACjB,kBAAkB;IAClB,kBAAkB;IAClB,eAAe;IACf,yBAAyB;AAC3B",sourcesContent:['<template>\n  <div class="table-pro-wrapper">\n    <div\n      class="table-order-buttons"\n      :class="{ active: isEditingOrder }"\n    >\n      <el-button\n        size="small"\n        type="primary"\n        @click="confirmOrder"\n        >确定</el-button\n      >\n      <el-button\n        size="small"\n        type="info"\n        @click="toggleEditingOrder(false)"\n        >取消</el-button\n      >\n      <el-button\n        size="small"\n        @click="resetConfig"\n        >恢复默认</el-button\n      >\n    </div>\n    <el-table\n      :data="tableData"\n      @header-click="toggleEditingOrder(true)"\n      border\n    >\n      <template\n        v-for="column in finalConfig"\n        :key="column.key || column.type"\n      >\n        \x3c!-- Selection Column --\x3e\n        <el-table-column\n          v-if="column.type === \'selection\'"\n          :width="column.width || 40"\n          :min-width="column.minWidth"\n          :align="column.align"\n          :fixed="checkIfFixed(column.key)"\n        >\n          <template #header>\n            <el-checkbox\n              v-if="column.label"\n              v-model="isAllSelected"\n              :indeterminate="isIndeterminate"\n              @change="toggleSelectAll"\n            >\n              {{ column.label }}\n            </el-checkbox>\n            <el-checkbox\n              v-else\n              v-model="isAllSelected"\n              :indeterminate="isIndeterminate"\n              @change="toggleSelectAll"\n            />\n          </template>\n          <template #default="{ row }">\n            <el-checkbox\n              :disabled="!checkFnAndReturnVal(column.selectable, row)"\n              :model-value="!!selectedRows.find((s: Record<string, any>) => s[column.uuid] === row[column.uuid])"\n              @change="toggleRowSelection(row, column)"\n            />\n          </template>\n        </el-table-column>\n\n        \x3c!-- Index Column --\x3e\n        <el-table-column\n          v-else-if="column.type === \'index\'"\n          type="index"\n          :index="indexOffset || 0"\n          :label="column.label"\n          :width="column.width"\n          :min-width="column.minWidth"\n          :align="column.align"\n          :fixed="checkIfFixed(column.key)"\n        />\n\n        \x3c!-- Buttons Column --\x3e\n        <el-table-column\n          v-else-if="column.buttons"\n          :label="column.label"\n          :width="column.width"\n          :min-width="column.minWidth"\n          :align="column.align"\n          :fixed="checkIfFixed(column.key)"\n        >\n          <template #header>\n            <div :style="`align:${column.align}`">{{ column.label }}</div>\n            <slot\n              v-if="column.headerSlot"\n              :name="column.headerSlot"\n            ></slot>\n            <div\n              class="header-actions"\n              v-if="isEditingOrder"\n            >\n              <div\n                v-if="getOrderIndex(column.key) > 0"\n                class="column-order-index"\n                :class="{ \'is-fixed\': checkIfFixed(column.key, true) }"\n                @click="toggleLeft(column.key)"\n              >\n                {{ getOrderIndex(column.key) }}\n              </div>\n              <el-icon\n                v-else\n                color="#fff"\n                size="20"\n                @click="toggleLeft(column.key)"\n              >\n                <DArrowLeft />\n              </el-icon>\n              <el-icon\n                :class="{ active: checkIfFixed(column.key, true) }"\n                color="#fff"\n                size="20"\n                @click="toggleFixed(column.key)"\n              >\n                <Lock />\n              </el-icon>\n            </div>\n          </template>\n          <template #default="{ row }">\n            <template\n              v-for="(btn, index) in column.buttons"\n              :key="index"\n            >\n              <el-popconfirm\n                v-if="btn.popconfirmTitle"\n                :title="checkFnAndReturnVal(btn.popconfirmTitle, row)"\n                :confirm-button-text="btn.popconfirmBtnText"\n                :cancel-button-text="btn.popcancelBtnText"\n                :icon="btn.popconfirmIcon"\n                :icon-color="btn.popconfirmIconColor"\n                :width="btn.width"\n                @confirm="btn.click(row)"\n              >\n                <template #reference>\n                  <el-button\n                    v-if="btn.text"\n                    :type="checkFnAndReturnVal(btn.type, row)"\n                    :icon="checkFnAndReturnVal(btn.icon, row)"\n                    :disabled="btn.disabled?.(row)"\n                    :size="btn.size"\n                    :round="btn.round"\n                  >\n                    {{ checkFnAndReturnVal(btn.text, row) }}\n                  </el-button>\n                  <el-button\n                    v-else\n                    :type="checkFnAndReturnVal(btn.type, row)"\n                    :icon="checkFnAndReturnVal(btn.icon, row)"\n                    :disabled="btn.disabled?.(row)"\n                    :size="btn.size"\n                    :circle="btn.circle"\n                  />\n                </template>\n              </el-popconfirm>\n              <el-button\n                v-else-if="btn.text"\n                :type="checkFnAndReturnVal(btn.type, row)"\n                :icon="checkFnAndReturnVal(btn.icon, row)"\n                :disabled="btn.disabled?.(row)"\n                :size="btn.size"\n                :round="btn.round"\n                @click="btn.click(row)"\n              >\n                {{ checkFnAndReturnVal(btn.text, row) }}\n              </el-button>\n              <el-button\n                v-else\n                :type="checkFnAndReturnVal(btn.type, row)"\n                :icon="checkFnAndReturnVal(btn.icon, row)"\n                :disabled="btn.disabled?.(row)"\n                :size="btn.size"\n                :circle="btn.circle"\n                @click="btn.click(row)"\n              />\n            </template>\n          </template>\n        </el-table-column>\n\n        \x3c!-- Image Column --\x3e\n        <el-table-column\n          v-else-if="column.type === \'image\'"\n          :prop="column.key"\n          :label="column.label"\n          :width="column.width"\n          :min-width="column.minWidth"\n          :align="column.align"\n          :fixed="checkIfFixed(column.key)"\n        >\n          <template #header>\n            <div :style="`align:${column.align}`">{{ column.label }}</div>\n            <slot\n              v-if="column.headerSlot"\n              :name="column.headerSlot"\n            ></slot>\n            <div\n              class="header-actions"\n              v-if="isEditingOrder"\n            >\n              <div\n                v-if="getOrderIndex(column.key) > 0"\n                class="column-order-index"\n                :class="{ \'is-fixed\': checkIfFixed(column.key, true) }"\n                @click="toggleLeft(column.key)"\n              >\n                {{ getOrderIndex(column.key) }}\n              </div>\n              <el-icon\n                v-else\n                color="#fff"\n                size="20"\n                @click="toggleLeft(column.key)"\n              >\n                <DArrowLeft />\n              </el-icon>\n              <el-icon\n                :class="{ active: checkIfFixed(column.key, true) }"\n                color="#fff"\n                size="20"\n                @click="toggleFixed(column.key)"\n              >\n                <Lock />\n              </el-icon>\n            </div>\n          </template>\n          <template #default="{ row }">\n            <el-image\n              v-if="column.key && row[column.key]"\n              :src="row[column.key]"\n              :preview-src-list="column.preview ? [row[column.key]] : []"\n              preview-teleported\n              :style="{\n                width: column.size?.width + \'px\',\n                height: column.size?.height + \'px\',\n              }"\n            />\n          </template>\n        </el-table-column>\n\n        \x3c!-- Link Column --\x3e\n        <el-table-column\n          v-else-if="column.type === \'link\'"\n          :prop="column.key"\n          :label="column.label"\n          :width="column.width"\n          :min-width="column.minWidth"\n          :align="column.align"\n          :fixed="checkIfFixed(column.key)"\n        >\n          <template #header>\n            <div :style="`align:${column.align}`">{{ column.label }}</div>\n            <slot\n              v-if="column.headerSlot"\n              :name="column.headerSlot"\n            ></slot>\n            <div\n              class="header-actions"\n              v-if="isEditingOrder"\n            >\n              <div\n                v-if="getOrderIndex(column.key) > 0"\n                class="column-order-index"\n                :class="{ \'is-fixed\': checkIfFixed(column.key, true) }"\n                @click="toggleLeft(column.key)"\n              >\n                {{ getOrderIndex(column.key) }}\n              </div>\n              <el-icon\n                v-else\n                color="#fff"\n                size="20"\n                @click="toggleLeft(column.key)"\n              >\n                <DArrowLeft />\n              </el-icon>\n              <el-icon\n                :class="{ active: checkIfFixed(column.key, true) }"\n                color="#fff"\n                size="20"\n                @click="toggleFixed(column.key)"\n              >\n                <Lock />\n              </el-icon>\n            </div>\n          </template>\n          <template #default="{ row }">\n            <a\n              class="element-to-lj"\n              :href="(column.checkSSL && column.checkSSL(row) ? \'http://\' : \'https://\') + row[column.key]"\n              target="_blank"\n            >\n              {{ row[column.key] }}\n            </a>\n          </template>\n        </el-table-column>\n\n        \x3c!-- Custom Slot Column --\x3e\n        <el-table-column\n          v-else-if="column.slot"\n          :label="column.label"\n          :width="column.width"\n          :min-width="column.minWidth"\n          :align="column.align"\n          :fixed="checkIfFixed(column.key)"\n        >\n          <template #header>\n            <div :style="`align:${column.align}`">{{ column.label }}</div>\n            <slot\n              v-if="column.headerSlot"\n              :name="column.headerSlot"\n            ></slot>\n            <div\n              class="header-actions"\n              v-if="isEditingOrder"\n            >\n              <div\n                v-if="getOrderIndex(column.key) > 0"\n                class="column-order-index"\n                :class="{ \'is-fixed\': checkIfFixed(column.key, true) }"\n                @click="toggleLeft(column.key)"\n              >\n                {{ getOrderIndex(column.key) }}\n              </div>\n              <el-icon\n                v-else\n                color="#fff"\n                size="20"\n                @click="toggleLeft(column.key)"\n              >\n                <DArrowLeft />\n              </el-icon>\n              <el-icon\n                :class="{ active: checkIfFixed(column.key, true) }"\n                color="#fff"\n                size="20"\n                @click="toggleFixed(column.key)"\n              >\n                <Lock />\n              </el-icon>\n            </div>\n          </template>\n          <template #default="{ row }">\n            <slot\n              :name="column.slot"\n              :row="row"\n            />\n          </template>\n        </el-table-column>\n\n        \x3c!-- Nested Columns --\x3e\n        <template v-else-if="column.children">\n          <el-table-column\n            :label="column.label"\n            :width="column.width"\n            :min-width="column.minWidth"\n            :align="column.align"\n            :fixed="checkIfFixed(column.key)"\n          >\n            <template #header>\n              <div :style="`align:${column.align}`">{{ column.label }}</div>\n              <slot\n                v-if="column.headerSlot"\n                :name="column.headerSlot"\n              ></slot>\n              <div\n                class="header-actions"\n                v-if="isEditingOrder"\n              >\n                <div\n                  v-if="getOrderIndex(column.key) > 0"\n                  class="column-order-index"\n                  :class="{ \'is-fixed\': checkIfFixed(column.key, true) }"\n                  @click="toggleLeft(column.key)"\n                >\n                  {{ getOrderIndex(column.key) }}\n                </div>\n                <el-icon\n                  v-else\n                  color="#fff"\n                  size="20"\n                  @click="toggleLeft(column.key)"\n                >\n                  <DArrowLeft />\n                </el-icon>\n                <el-icon\n                  :class="{ active: checkIfFixed(column.key, true) }"\n                  color="#fff"\n                  size="20"\n                  @click="toggleFixed(column.key)"\n                >\n                  <Lock />\n                </el-icon>\n              </div>\n            </template>\n            <template\n              v-for="child in column.children"\n              :key="child.key"\n            >\n              <el-table-column\n                :prop="child.key"\n                :label="child.label"\n                :width="child.width"\n              />\n            </template>\n          </el-table-column>\n        </template>\n\n        \x3c!-- Normal Column --\x3e\n        <el-table-column\n          v-else\n          :prop="column.key"\n          :label="column.label"\n          :width="column.width"\n          :min-width="column.minWidth"\n          :align="column.align"\n          :sortable="column.sortable"\n          :filters="column.filters"\n          :filter-method="column.filterMethod"\n          :fixed="checkIfFixed(column.key)"\n          v-show="!column.hidden"\n        >\n          <template #header>\n            <div :style="`align:${column.align}`">{{ column.label }}</div>\n            <slot\n              v-if="column.headerSlot"\n              :name="column.headerSlot"\n            ></slot>\n            <div\n              class="header-actions"\n              v-if="isEditingOrder"\n            >\n              <div\n                v-if="getOrderIndex(column.key) > 0"\n                class="column-order-index"\n                :class="{ \'is-fixed\': checkIfFixed(column.key, true) }"\n                @click="toggleLeft(column.key)"\n              >\n                {{ getOrderIndex(column.key) }}\n              </div>\n              <el-icon\n                v-else\n                color="#fff"\n                size="20"\n                @click="toggleLeft(column.key)"\n              >\n                <DArrowLeft />\n              </el-icon>\n              <el-icon\n                :class="{ active: checkIfFixed(column.key, true) }"\n                color="#fff"\n                size="20"\n                @click="toggleFixed(column.key)"\n              >\n                <Lock />\n              </el-icon>\n            </div>\n          </template>\n          <template\n            #default="{ row, $index }"\n            v-if="column.key"\n          >\n            <template v-if="column.switch">\n              <el-switch\n                v-model="row[column.key]"\n                :style="{\n                  \'--el-switch-on-color\': column.switch?.onColor || \'#13ce66\',\n                  \'--el-switch-off-color\': column.switch?.offColor || \'#ff4949\',\n                }"\n                :active-value="column.switch?.activeValue"\n                :inactive-value="column.switch?.inactiveValue"\n                :active-text="column.switch?.activeText"\n                :inactive-text="column.switch?.inactiveText"\n                inline-prompt\n                :loading="row.loading"\n                @change="\n                  (val) =>\n                    column.switch?.change(\n                      val,\n                      val === column.switch?.activeValue ? column.switch?.inactiveValue : column.switch?.activeValue,\n                      row\n                    )\n                "\n              />\n            </template>\n            <div\n              class="input-wrapper"\n              v-else-if="column.input"\n            >\n              <el-input\n                v-model="row[column.key]"\n                :type="column.input?.type || \'text\'"\n                :placeholder="column.input?.placeholder || \'请输入\'"\n                :maxlength="column.input?.maxlength"\n                :show-word-limit="!!column.input?.maxlength"\n                :disabled="column.input?.disabled?.(row)"\n                @focus="column.key && !row[`${column.key}-old`] && (row[`${column.key}-old`] = row[column.key])"\n                @blur="\n                  column.key &&\n                    row[`${column.key}-old`].toString() === row[column.key] &&\n                    (row[`${column.key}-old`] = undefined)\n                "\n              />\n              <template v-if="row[`${column.key}-old`] !== undefined && row[`${column.key}-old`] !== row[column.key]">\n                <el-button\n                  type="primary"\n                  size="small"\n                  @click="column.input?.change(row[column.key], row[`${column.key}-old`], row)"\n                >\n                  确认\n                </el-button>\n                <el-button\n                  size="small"\n                  @click="row[column.key] = row[`${column.key}-old`]"\n                  >取消</el-button\n                >\n              </template>\n            </div>\n            <template v-else-if="column.tag">\n              <div class="tags-wrapper">\n                <template v-if="Array.isArray(row[column.key])">\n                  <template\n                    v-for="(value, index) in row[column.key]"\n                    :key="index"\n                  >\n                    <el-tag\n                      :type="checkFnAndReturnVal(column.tag.type, row, value)"\n                      :effect="column.tag.effect || \'dark\'"\n                      :closable="column.tag.closable"\n                      @close="handleTagClose(row, column, index)"\n                    >\n                      {{ formatTagValue(value, column) }}\n                    </el-tag>\n                  </template>\n                  <div\n                    v-if="column.tag.addable"\n                    class="tag-input-wrapper"\n                  >\n                    <el-input\n                      v-if="tempBooleans[getRowColumnKey(row, column, $index)]"\n                      :id="getRowColumnKey(row, column, $index)"\n                      v-model="tagInputValues[getRowColumnKey(row, column, $index)]"\n                      :placeholder="column.tag.addPlaceholder || \'请输入\'"\n                      size="small"\n                      @keyup.enter="handleTagAdd(row, column, $index)"\n                      @blur="handleTagInputBlur(row, column, $index)"\n                    />\n                    <el-button\n                      v-else\n                      size="small"\n                      @click="(event: MouseEvent) => showTagInput(row, column, $index)"\n                    >\n                      + 新标签\n                    </el-button>\n                  </div>\n                </template>\n                <template v-else>\n                  <el-tag\n                    :type="checkFnAndReturnVal(column.tag.type, row, row[column.key])"\n                    :effect="column.tag.effect || \'dark\'"\n                  >\n                    {{ formatTagValue(row[column.key], column) }}\n                  </el-tag>\n                </template>\n              </div>\n            </template>\n            <template v-else>\n              <span :style="column.cellStyle?.(row, column)">\n                {{ column.key ? formatCellValue(row[column.key], column, row) : \'\' }}\n              </span>\n            </template>\n          </template>\n        </el-table-column>\n      </template>\n    </el-table>\n  </div>\n</template>\n\n<script setup lang="ts">\n  import { ref, nextTick, computed, toRef } from \'vue\';\n  import {\n    ElTable,\n    ElTableColumn,\n    ElButton,\n    ElSwitch,\n    ElImage,\n    ElTag,\n    ElInput,\n    ElPopconfirm,\n    ElMessage,\n    ElIcon,\n  } from \'element-plus\';\n  import { DArrowLeft, Lock, Refresh } from \'@element-plus/icons-vue\';\n\n  type ButtonType = \'primary\' | \'success\' | \'warning\' | \'danger\' | \'info\' | \'text\' | \'default\';\n  type TagType = \'primary\' | \'success\' | \'warning\' | \'info\' | \'danger\';\n\n  export interface TableColumn {\n    uuid?: string;\n    type?: \'selection\' | \'index\' | \'image\' | \'link\';\n    key?: string;\n    label?: string;\n    width?: number;\n    minWidth?: number;\n    align?: \'left\' | \'center\' | \'right\';\n    hidden?: boolean;\n    sortable?: boolean;\n    selectable?: boolean | ((row: Record<string, any>) => boolean);\n    filters?: { text: string; value: any }[];\n    dictionary?: Record<string | number, string>;\n    defaultValue?: string;\n    children?: TableColumn[];\n    switch?: {\n      activeValue: any;\n      inactiveValue: any;\n      onColor?: string;\n      offColor?: string;\n      activeText?: string;\n      inactiveText?: string;\n      change: (newValue: any, oldValue: any, row: Record<string, any>) => void;\n    };\n    input?: {\n      type?: \'text\' | \'number\' | \'textarea\';\n      maxlength?: number;\n      placeholder?: string;\n      change: (newValue: any, oldValue: any, row: Record<string, any>) => void;\n      disabled?: (row: Record<string, any>) => boolean;\n    };\n    buttons?: {\n      type: ButtonType | ((row: Record<string, any>) => ButtonType);\n      click: (row: Record<string, any>) => void;\n      text?: string | ((row: Record<string, any>) => string);\n      icon?: any;\n      disabled?: (row: Record<string, any>) => boolean;\n      popconfirmTitle?: string | ((row: Record<string, any>) => string);\n      popconfirmBtnText?: string;\n      popcancelBtnText?: string;\n      popconfirmIcon?: any;\n      popconfirmIconColor?: string;\n      width?: string;\n      size?: \'large\' | \'default\' | \'small\';\n      round?: boolean;\n      circle?: boolean;\n    }[];\n    slot?: string;\n    size?: { width: number; height: number };\n    preview?: boolean;\n    fixed?: boolean;\n    headerSlot?: string;\n    tag?: {\n      type?: TagType | ((row: Record<string, any>, value?: any) => TagType);\n      effect?: \'dark\' | \'light\' | \'plain\';\n      closable?: boolean;\n      addable?: boolean;\n      addPlaceholder?: string;\n      label?: string;\n      beforeAdd?: (value: string, row: Record<string, any>) => boolean | Promise<boolean>;\n      beforeRemove?: (index: number, value: any, row: Record<string, any>) => boolean | Promise<boolean>;\n      onAdd?: (value: string, row: Record<string, any>) => void;\n      onRemove?: (index: number, value: any, row: Record<string, any>) => void;\n    };\n    filterMethod?: (value: any, row: Record<string, any>) => boolean;\n    colspan?: (row: Record<string, any>, column: TableColumn) => number;\n    formatter?: (value: any, row: Record<string, any>) => string;\n    cellStyle?: (row: Record<string, any>, column: TableColumn) => Record<string, string>;\n    checkSSL?: (row: Record<string, any>) => boolean;\n  }\n\n  interface Props {\n    tableData: Record<string, any>[];\n    config: TableColumn[];\n    indexOffset?: number;\n    controllable?: boolean;\n    selectedRows?: Record<string, any>[];\n  }\n\n  const props = withDefaults(defineProps<Props>(), { controllable: true });\n  const emit = defineEmits([\'selection-change\']);\n\n  // Store input values for tag adding\n  const _preOriginOrderConfig = [];\n  const _preFixedColumns = [];\n  const _config = props.config.map((column: TableColumn, index: number) => {\n    const key = column.key || `column-${index}`;\n    _preOriginOrderConfig.push(key);\n    column.fixed && _preFixedColumns.push(key);\n    return {\n      ...column,\n      key,\n    };\n  });\n  const cacheKey = JSON.stringify(_preOriginOrderConfig);\n  const cacheFixedColumns = JSON.parse(localStorage.getItem(`fixedColumns-${cacheKey}`) || \'null\');\n  const cacheLeftOrderConfig = JSON.parse(localStorage.getItem(`leftOrderConfig-${cacheKey}`) || \'null\');\n  const tagInputValues = ref<Record<string, string>>({});\n  const tempBooleans = ref<Record<string, boolean>>({});\n  const tempFixedColumns = ref<string[]>([]);\n  const fixedColumns = ref<string[]>(cacheFixedColumns || _preFixedColumns);\n  const tempLeftOrderConfig = ref<string[]>([]);\n  const leftOrderConfig = ref<string[]>(cacheLeftOrderConfig || []);\n  const originOrderConfig = ref<string[]>(_preOriginOrderConfig);\n  const isEditingOrder = ref(false);\n  const selectedRows = toRef(props.selectedRows || []);\n\n  const finalConfig = computed((): TableColumn[] => {\n    const result = [];\n    fixedColumns.value.map((key: string) => {\n      result.push(_config.find((column: TableColumn) => column.key === key));\n    });\n    leftOrderConfig.value.map((key: string) => {\n      if (checkIfFixed(key)) return;\n      result.push(_config.find((column: TableColumn) => column.key === key));\n    });\n    originOrderConfig.value.map((key: string) => {\n      if (checkIfFixed(key) || leftOrderConfig.value.indexOf(key) !== -1) return;\n      const keyOne = _config.find((column: TableColumn) => column.key === key);\n      keyOne && result.push(keyOne);\n    });\n    return result;\n  });\n\n  const toggleEditingOrder = (open?: boolean) => {\n    if (!props.controllable || isEditingOrder.value === open) return;\n    isEditingOrder.value = open !== undefined ? open : !isEditingOrder.value;\n    if (isEditingOrder.value) {\n      tempFixedColumns.value = [...fixedColumns.value];\n      tempLeftOrderConfig.value = [...leftOrderConfig.value];\n    }\n  };\n\n  const getRowColumnKey = (row: Record<string, any>, column: TableColumn, index: number) => {\n    return `${index}-${row.id || \'\'}-${column.key || \'\'}`;\n  };\n\n  const checkFnAndReturnVal = (\n    val: any | ((row: Record<string, any>) => any),\n    row: Record<string, any>,\n    argsValue?: any\n  ) => (typeof val === \'function\' ? val(row, argsValue) : val);\n\n  // 计算是否所有行都被选中\n  const isAllSelected = computed(\n    () => props.tableData.length > 0 && selectedRows.value.length === props.tableData.length\n  );\n\n  // 计算是否部分选中（半选状态）\n  const isIndeterminate = computed(\n    () => selectedRows.value.length > 0 && selectedRows.value.length < props.tableData.length\n  );\n\n  // 处理单行选中\n  const toggleRowSelection = (row: Record<string, any>, column: TableColumn) => {\n    const index = selectedRows.value.findIndex((item) => item[column.uuid] === row[column.uuid]);\n    if (index > -1) {\n      selectedRows.value.splice(index, 1);\n    } else {\n      selectedRows.value.push(row);\n    }\n    handleSelectionChange(selectedRows.value);\n  };\n\n  // 切换全选\n  const toggleSelectAll = () => {\n    if (isAllSelected.value) {\n      selectedRows.value = [];\n    } else {\n      selectedRows.value = [...props.tableData];\n    }\n    handleSelectionChange(selectedRows.value);\n  };\n\n  const handleSelectionChange = (selection: Record<string, any>[]) => {\n    emit(\'selection-change\', selection);\n  };\n\n  const handleTagInputBlur = (row: Record<string, any>, column: TableColumn, index: number) => {\n    const inputKey = getRowColumnKey(row, column, index);\n    !tagInputValues.value[inputKey] && (tempBooleans.value[inputKey] = false);\n  };\n\n  const showTagInput = (row: Record<string, any>, column: TableColumn, index: number) => {\n    const inputKey = getRowColumnKey(row, column, index);\n    tempBooleans.value[inputKey] = true;\n    nextTick(() => {\n      const input = document.getElementById(inputKey) as HTMLInputElement;\n      input?.focus();\n    });\n  };\n\n  const handleTagClose = async (row: Record<string, any>, column: TableColumn, index: number) => {\n    if (!column.key) return;\n\n    const value = row[column.key][index];\n\n    if (column.tag?.beforeRemove) {\n      const canRemove = await column.tag.beforeRemove(index, value, row);\n      if (!canRemove) return;\n    }\n\n    const newValue = [...row[column.key]];\n    newValue.splice(index, 1);\n    row[column.key] = newValue;\n\n    column.tag?.onRemove?.(index, value, row);\n  };\n\n  const handleTagAdd = async (row: Record<string, any>, column: TableColumn, index: number) => {\n    if (!column.key) return;\n\n    const inputKey = getRowColumnKey(row, column, index);\n    const value = tagInputValues.value[inputKey]?.trim();\n\n    if (!value) return;\n\n    // Check for duplicate tags\n    if (Array.isArray(row[column.key]) && row[column.key].includes(value)) {\n      ElMessage.warning(\'标签已存在\');\n      return;\n    }\n\n    if (column.tag?.beforeAdd) {\n      const canAdd = await column.tag.beforeAdd(value, row);\n      if (!canAdd) return;\n    }\n\n    if (!Array.isArray(row[column.key])) {\n      row[column.key] = [];\n    }\n\n    const newValue = [...row[column.key], value];\n    row[column.key] = newValue;\n\n    column.tag?.onAdd?.(value, row);\n\n    // Clear input\n    tagInputValues.value[inputKey] = \'\';\n  };\n\n  const formatCellValue = (value: any, column: TableColumn, row?: Record<string, any>) => {\n    if (column.formatter) {\n      return column.formatter(value, row);\n    }\n\n    if (value === undefined || value === null || value === \'\') {\n      return column.defaultValue || \'\';\n    }\n\n    if (column.dictionary && value in column.dictionary) {\n      return column.dictionary[value];\n    }\n\n    return value;\n  };\n\n  const formatTagValue = (value: any, column: TableColumn) => {\n    if (typeof value === \'object\' && value !== null) {\n      return value[column.tag.label];\n    }\n    return formatCellValue(value, column);\n  };\n\n  const toggleLeft = (key: string = \'\') => {\n    if (checkIfFixed(key, true)) return;\n    const index = tempLeftOrderConfig.value.indexOf(key);\n    if (index === -1) {\n      tempLeftOrderConfig.value.push(key);\n    } else {\n      tempLeftOrderConfig.value.splice(index, 1);\n    }\n  };\n  const toggleFixed = (key: string = \'\') => {\n    const index = tempFixedColumns.value.indexOf(key);\n    if (index === -1) {\n      tempFixedColumns.value.push(key);\n    } else {\n      tempFixedColumns.value.splice(index, 1);\n    }\n  };\n  const getOrderIndex = (key: string = \'\') => {\n    let index = tempFixedColumns.value.indexOf(key);\n    if (index === -1) {\n      index = tempLeftOrderConfig.value.indexOf(key);\n      index = index !== -1 ? index + tempFixedColumns.value.length : index;\n    }\n    return index + 1;\n  };\n  const checkIfFixed = (key: string = \'\', isTemp?: boolean) => {\n    return (isTemp ? tempFixedColumns.value : fixedColumns.value).indexOf(key) !== -1;\n  };\n  const resetConfig = () => {\n    fixedColumns.value = _preFixedColumns;\n    leftOrderConfig.value = [];\n    localStorage.setItem(`fixedColumns-${cacheKey}`, JSON.stringify(fixedColumns.value));\n    localStorage.setItem(`leftOrderConfig-${cacheKey}`, JSON.stringify(leftOrderConfig.value));\n    toggleEditingOrder(false);\n  };\n  const confirmOrder = () => {\n    fixedColumns.value = [...tempFixedColumns.value];\n    leftOrderConfig.value = [...tempLeftOrderConfig.value];\n    localStorage.setItem(`fixedColumns-${cacheKey}`, JSON.stringify(fixedColumns.value));\n    localStorage.setItem(`leftOrderConfig-${cacheKey}`, JSON.stringify(leftOrderConfig.value));\n    toggleEditingOrder(false);\n  };\n<\/script>\n\n<style scoped>\n  .table-pro-wrapper {\n    position: relative;\n    height: fit-content;\n    overflow: hidden;\n  }\n  .table-order-buttons {\n    display: none;\n  }\n  .table-order-buttons.active {\n    position: absolute;\n    display: flex;\n    background-color: rgba(0, 0, 0, 0.3);\n    gap: 8px;\n    bottom: 0;\n    right: 0;\n    z-index: 10;\n    padding: 4px 8px;\n  }\n  .el-table {\n    width: 100%;\n    height: 100%;\n    font-size: 14px;\n  }\n  .input-wrapper {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  .input-wrapper .el-button + .el-button {\n    margin-left: 0;\n  }\n  .tags-wrapper {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 4px;\n    align-items: center;\n  }\n  .tags-wrapper .el-tag {\n    margin: 0;\n    cursor: default;\n    font-size: 12px;\n  }\n  .tags-wrapper .el-tag.is-closable {\n    cursor: pointer;\n  }\n  .tag-input-wrapper {\n    width: 70px;\n    line-height: 24px;\n  }\n  .tag-input-wrapper .el-input,\n  .tag-input-wrapper .el-button {\n    width: 100%;\n  }\n  .el-table .el-table__cell .header-actions {\n    position: absolute;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 8px;\n    background-color: rgba(0, 0, 0, 0.2);\n  }\n  .el-table .el-table__cell .header-actions .el-icon {\n    background-color: #909399;\n    border-radius: 50%;\n    padding: 4px;\n    cursor: pointer;\n  }\n\n  .el-table .el-table__cell .header-actions .el-icon.active {\n    background-color: #303133;\n  }\n  .el-table .el-table__cell .header-actions .el-icon:hover,\n  .el-table .el-table__cell .header-actions .el-icon.active:hover {\n    background-color: #4f5562;\n  }\n  .el-table .el-table__cell .header-actions .column-order-index {\n    background-color: #303133;\n    border-radius: 50%;\n    width: 20px;\n    height: 20px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    color: #fff;\n    position: relative;\n  }\n  .el-table .el-table__cell .header-actions .column-order-index.is-fixed {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n  .el-table .el-table__cell .header-actions .column-order-index:not(.is-fixed):hover::before {\n    content: \'X\';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    line-height: 20px;\n    text-align: center;\n    border-radius: 50%;\n    font-size: 12px;\n    background-color: #4f5562;\n  }\n</style>\n'],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/exportHelper.js":(__unused_webpack_module,exports)=>{exports.A=(sfc,props)=>{const target=sfc.__vccOpts||sfc;for(const[key,val]of props)target[key]=val;return target}}}]);