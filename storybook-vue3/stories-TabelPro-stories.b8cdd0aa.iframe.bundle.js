"use strict";(self.webpackChunkstorybook_vue3=self.webpackChunkstorybook_vue3||[]).push([[368],{"./src/stories/TabelPro.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,__namedExportsOrder:()=>__namedExportsOrder,default:()=>TabelPro_stories});var vue_esm_bundler=__webpack_require__("./node_modules/.pnpm/vue@3.5.13_typescript@5.7.2/node_modules/vue/dist/vue.esm-bundler.js"),message=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/message/index.mjs"),table=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/table/index.mjs"),popconfirm=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/popconfirm/index.mjs"),components_button=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/button/index.mjs"),components_image=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/image/index.mjs"),components_switch=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/switch/index.mjs"),input=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/input/index.mjs"),tag=__webpack_require__("./node_modules/.pnpm/element-plus@2.9.3_vue@3.5.13_typescript@5.7.2_/node_modules/element-plus/es/components/tag/index.mjs");const _hoisted_1={key:1,class:"input-wrapper"},_hoisted_2={key:2,class:"tags-wrapper"},_hoisted_3={key:0,class:"tag-input-wrapper"},TabelProvue_type_script_setup_true_lang_ts=(0,vue_esm_bundler.pM)({__name:"TabelPro",props:{listData:{},config:{},indexOffset:{}},emits:["selection-change"],setup(__props,{emit:__emit}){const emit=__emit,tagInputValues=(0,vue_esm_bundler.KR)({}),tempBooleans=(0,vue_esm_bundler.KR)({}),getRowColumnKey=(row,column,index)=>`${index}-${row.id||""}-${column.key||""}`,handleSelectionChange=selection=>{emit("selection-change",selection)},formatCellValue=(value,column)=>null==value||""===value?column.defaultValue||"":column.dictionary&&value in column.dictionary?column.dictionary[value]:column.formatter?column.formatter(value):value,formatTagValue=(value,column)=>"object"==typeof value&&null!==value?value.label||value.name||value.text||value.value||value.toString():formatCellValue(value,column);return(_ctx,_cache)=>((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.Up),{data:_ctx.listData,style:{width:"100%"},onSelectionChange:handleSelectionChange},{default:(0,vue_esm_bundler.k6)((()=>[((0,vue_esm_bundler.uX)(!0),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,null,(0,vue_esm_bundler.pI)(_ctx.config,(column=>((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,{key:column.key||column.type},["selection"===column.type?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:0,type:"selection",width:column.width,fixed:column.fixed},null,8,["width","fixed"])):"index"===column.type?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:1,type:"index",index:_ctx.indexOffset||0,label:column.label,width:column.width,fixed:column.fixed},null,8,["index","label","width","fixed"])):column.buttons?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:2,label:column.label,width:column.width,fixed:column.fixed},{default:(0,vue_esm_bundler.k6)((({row})=>[((0,vue_esm_bundler.uX)(!0),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,null,(0,vue_esm_bundler.pI)(column.buttons,((btn,index)=>((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,{key:index},[btn.popconfirmText?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(popconfirm.n3),{key:0,title:btn.popconfirmText,onConfirm:$event=>btn.click(row)},{reference:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(components_button.S2),{type:btn.type,disabled:btn.disabled?.(row)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.eW)((0,vue_esm_bundler.v_)(btn.text),1)])),_:2},1032,["type","disabled"])])),_:2},1032,["title","onConfirm"])):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(components_button.S2),{key:1,type:btn.type,disabled:btn.disabled?.(row),onClick:$event=>btn.click(row)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.eW)((0,vue_esm_bundler.v_)(btn.text),1)])),_:2},1032,["type","disabled","onClick"]))],64)))),128))])),_:2},1032,["label","width","fixed"])):"image"===column.type?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:3,prop:column.key,label:column.label,width:column.width,fixed:column.fixed},{default:(0,vue_esm_bundler.k6)((({row})=>[column.key&&row[column.key]?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(components_image.Zq),{key:0,src:row[column.key],"preview-src-list":column.preview?[row[column.key]]:[],"preview-teleported":"",style:(0,vue_esm_bundler.Tr)({width:column.size?.width+"px",height:column.size?.height+"px"})},null,8,["src","preview-src-list","style"])):(0,vue_esm_bundler.Q3)("",!0)])),_:2},1032,["prop","label","width","fixed"])):column.slot?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:4,label:column.label,width:column.width,fixed:column.fixed},{default:(0,vue_esm_bundler.k6)((({row})=>[(0,vue_esm_bundler.RG)(_ctx.$slots,column.slot,{row})])),_:2},1032,["label","width","fixed"])):column.children?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:5,label:column.label,width:column.width,align:column.align,fixed:column.fixed},{default:(0,vue_esm_bundler.k6)((()=>[((0,vue_esm_bundler.uX)(!0),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,null,(0,vue_esm_bundler.pI)(column.children,(child=>((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:child.key,prop:child.key,label:child.label,width:child.width},null,8,["prop","label","width"])))),128))])),_:2},1032,["label","width","align","fixed"])):(0,vue_esm_bundler.bo)(((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(table.o8),{key:6,prop:column.key,label:column.label,width:column.width,align:column.align,sortable:column.sortable,filters:column.filters,"filter-method":column.filterMethod,fixed:column.fixed},(0,vue_esm_bundler.eX)({_:2},[column.key?{name:"default",fn:(0,vue_esm_bundler.k6)((({row,$index})=>[column.switch?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(components_switch.qi),{key:0,modelValue:row[column.key],"onUpdate:modelValue":$event=>row[column.key]=$event,onChange:val=>column.switch?.change(val,row)},null,8,["modelValue","onUpdate:modelValue","onChange"])):column.input?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_1,[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(input.WK),{modelValue:row[column.key],"onUpdate:modelValue":$event=>row[column.key]=$event,type:column.input?.type||"text",placeholder:column.input?.placeholder||"请输入",maxlength:column.input?.maxlength,"show-word-limit":!!column.input?.maxlength,disabled:column.input?.disabled?.(row),onFocus:$event=>column.key&&!row[`${column.key}-old`]&&(row[`${column.key}-old`]=row[column.key]),onBlur:$event=>column.key&&row[`${column.key}-old`].toString()===row[column.key]&&(row[`${column.key}-old`]=void 0)},null,8,["modelValue","onUpdate:modelValue","type","placeholder","maxlength","show-word-limit","disabled","onFocus","onBlur"]),void 0!==row[`${column.key}-old`]&&row[`${column.key}-old`]!==row[column.key]?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,{key:0},[(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(components_button.S2),{type:"primary",size:"small",onClick:$event=>column.input?.change(row[column.key],row[`${column.key}-old`],row)},{default:(0,vue_esm_bundler.k6)((()=>_cache[0]||(_cache[0]=[(0,vue_esm_bundler.eW)("确认")]))),_:2},1032,["onClick"]),(0,vue_esm_bundler.bF)((0,vue_esm_bundler.R1)(components_button.S2),{size:"small",onClick:$event=>row[column.key]=row[`${column.key}-old`]},{default:(0,vue_esm_bundler.k6)((()=>_cache[1]||(_cache[1]=[(0,vue_esm_bundler.eW)("取消")]))),_:2},1032,["onClick"])],64)):(0,vue_esm_bundler.Q3)("",!0)])):column.tag?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_2,[Array.isArray(row[column.key])?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,{key:0},[((0,vue_esm_bundler.uX)(!0),(0,vue_esm_bundler.CE)(vue_esm_bundler.FK,null,(0,vue_esm_bundler.pI)(row[column.key],((value,index)=>((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(tag.u),{key:index,type:"function"==typeof column.tag.type?column.tag.type(row,value):column.tag.type,effect:column.tag.effect||"dark",closable:column.tag.closable,onClose:$event=>(async(row,column,index)=>{if(!column.key)return;const value=row[column.key][index];if(column.tag?.beforeRemove&&!await column.tag.beforeRemove(index,value,row))return;const newValue=[...row[column.key]];newValue.splice(index,1),row[column.key]=newValue,column.tag?.onRemove?.(index,value,row)})(row,column,index)},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.eW)((0,vue_esm_bundler.v_)(formatTagValue(value,column)),1)])),_:2},1032,["type","effect","closable","onClose"])))),128)),column.tag.addable?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("div",_hoisted_3,[tempBooleans.value[getRowColumnKey(row,column,$index)]?((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(input.WK),{key:0,id:getRowColumnKey(row,column,$index),modelValue:tagInputValues.value[getRowColumnKey(row,column,$index)],"onUpdate:modelValue":$event=>tagInputValues.value[getRowColumnKey(row,column,$index)]=$event,placeholder:column.tag.addPlaceholder||"请输入",size:"small",onKeyup:(0,vue_esm_bundler.jR)(($event=>(async(row,column,index)=>{if(!column.key)return;const inputKey=getRowColumnKey(row,column,index),value=tagInputValues.value[inputKey]?.trim();if(!value)return;if(Array.isArray(row[column.key])&&row[column.key].includes(value))return void message.nk.warning("标签已存在");if(column.tag?.beforeAdd&&!await column.tag.beforeAdd(value,row))return;Array.isArray(row[column.key])||(row[column.key]=[]);const newValue=[...row[column.key],value];row[column.key]=newValue,column.tag?.onAdd?.(value,row),tagInputValues.value[inputKey]=""})(row,column,$index)),["enter"]),onBlur:$event=>((row,column,index)=>{const inputKey=getRowColumnKey(row,column,index);!tagInputValues.value[inputKey]&&(tempBooleans.value[inputKey]=!1)})(row,column,$index)},null,8,["id","modelValue","onUpdate:modelValue","placeholder","onKeyup","onBlur"])):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(components_button.S2),{key:1,size:"small",onClick:event=>((row,column,index)=>{const inputKey=getRowColumnKey(row,column,index);tempBooleans.value[inputKey]=!0,(0,vue_esm_bundler.dY)((()=>{const input=document.getElementById(inputKey);input?.focus()}))})(row,column,$index)},{default:(0,vue_esm_bundler.k6)((()=>_cache[2]||(_cache[2]=[(0,vue_esm_bundler.eW)(" + 新标签 ")]))),_:2},1032,["onClick"]))])):(0,vue_esm_bundler.Q3)("",!0)],64)):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.Wv)((0,vue_esm_bundler.R1)(tag.u),{key:1,type:"function"==typeof column.tag.type?column.tag.type(row,row[column.key]):column.tag.type,effect:column.tag.effect||"dark"},{default:(0,vue_esm_bundler.k6)((()=>[(0,vue_esm_bundler.eW)((0,vue_esm_bundler.v_)(formatCellValue(row[column.key],column)),1)])),_:2},1032,["type","effect"]))])):((0,vue_esm_bundler.uX)(),(0,vue_esm_bundler.CE)("span",{key:3,style:(0,vue_esm_bundler.Tr)(column.cellStyle?.(row,column))},(0,vue_esm_bundler.v_)(column.key?formatCellValue(row[column.key],column):""),5))])),key:"0"}:void 0]),1032,["prop","label","width","align","sortable","filters","filter-method","fixed"])),[[vue_esm_bundler.aG,!column.hidden]])],64)))),128))])),_:3},8,["data"]))}});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/.pnpm/style-loader@3.3.4_webpack@5.97.1_esbuild@0.24.0_/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),TabelProvue_type_style_index_0_id_29858a42_scoped_true_lang_css=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.97.1_esbuild@0.24.0_/node_modules/css-loader/dist/cjs.js??clonedRuleSet-8.use[1]!./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/.pnpm/postcss-loader@8.1.1_postcss@8.4.49_typescript@5.7.2_webpack@5.97.1_esbuild@0.24.0_/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[0]!./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/index.js??ruleSet[0]!./src/components/TabelPro.vue?vue&type=style&index=0&id=29858a42&scoped=true&lang=css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(TabelProvue_type_style_index_0_id_29858a42_scoped_true_lang_css.A,options);TabelProvue_type_style_index_0_id_29858a42_scoped_true_lang_css.A&&TabelProvue_type_style_index_0_id_29858a42_scoped_true_lang_css.A.locals&&TabelProvue_type_style_index_0_id_29858a42_scoped_true_lang_css.A.locals;const __exports__=(0,__webpack_require__("./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/exportHelper.js").A)(TabelProvue_type_script_setup_true_lang_ts,[["__scopeId","data-v-29858a42"]]),TabelPro=__exports__;__exports__.__docgenInfo={exportName:"default",displayName:"TabelPro",description:"",tags:{},props:[{name:"listData",required:!0,type:{name:"Array",elements:[{name:"Record",elements:[{name:"string"},{name:"any"}]}]}},{name:"config",required:!0,type:{name:"Array",elements:[{name:"TableColumn"}]}},{name:"indexOffset",required:!0,type:{name:"number"}}],events:[{name:"selection-change"}],slots:[{name:"column.slot",scoped:!0,bindings:[{name:"name",title:"binding"},{name:"row",title:"binding"}]}],sourceFiles:["/Users/future/Desktop/projects/storybook-vue3/src/components/TabelPro.vue"]};const TabelPro_stories={title:"Components/TabelPro",component:TabelPro,tags:["autodocs"]},Basic=(args=>({components:{TabelPro},setup:()=>({args,handleTagAdd:({row,column,value,newValue})=>{console.log("添加标签:",{row,column,value,newValue})},handleTagRemove:({row,column,index,value,newValue})=>{console.log("删除标签:",{row,column,index,value,newValue})}}),template:'\n    <TabelPro \n      v-bind="args" \n      @tag-add="handleTagAdd"\n      @tag-remove="handleTagRemove"\n    />\n  '})).bind({});Basic.args={listData:[{id:1,name:"张三",sex:1,age:25,score:95,createdAt:"2024-03-20T10:00:00",status:!0,editable:!0,province:"广东",city:"深圳",region:"南方",images:"https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png",tags:["前端","Vue","React"],roles:[{name:"管理员",type:"danger"},{name:"开发者",type:"success"}],skills:[{label:"Vue",level:"expert"},{label:"React",level:"intermediate"},{label:"Angular",level:"beginner"}]},{id:2,name:"李四",sex:0,age:30,score:85,createdAt:"2024-03-19T15:30:00",status:!1,editable:!1,province:"北京",city:"北京",region:"",images:"https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png",tags:["后端","Java","Python"],roles:[{name:"测试",type:"warning"}],skills:[{label:"Java",level:"expert"},{label:"Python",level:"intermediate"}]}],config:[{type:"selection",width:50},{type:"index",label:"#",width:50,fixed:!0},{key:"name",label:"姓名",width:100,align:"right",fixed:!0},{key:"sex",label:"性别",dictionary:{0:"女",1:"男"},filters:[{text:"男",value:1},{text:"女",value:0}],filterMethod:(value,row)=>row.sex===value},{key:"tags",label:"技术标签",width:300,tag:{type:(row,value)=>({前端:"success",后端:"info",Vue:"success",React:"info",Java:"warning",Python:"warning"}[value]||"info"),effect:"light",closable:!0,addable:!0,addPlaceholder:"输入技术标签",beforeAdd:(value,row)=>!(value.length>10)||(message.nk.warning("标签长度不能超过10个字符"),!1),onAdd:(value,row)=>{console.log("标签已添加:",value,row)},onRemove:(index,value,row)=>{console.log("标签已删除:",index,value,row)}}},{key:"roles",label:"角色",width:200,tag:{type:(row,value)=>value.type,effect:"dark",closable:!0,addable:!0,addPlaceholder:"输入角色名称",onAdd:(value,row)=>{console.log("角色已添加:",value,row)},onRemove:(index,value,row)=>{console.log("角色已删除:",index,value,row)}}},{key:"skills",label:"技能",width:300,tag:{type:(row,value)=>({expert:"success",intermediate:"warning",beginner:"info"}[value.level]),effect:"plain",closable:!0,onRemove:(index,value,row)=>{console.log("技能已删除:",index,value,row)}}},{key:"createdAt",label:"创建时间",formatter:value=>new Date(value).toLocaleDateString()},{key:"age",label:"年龄",sortable:!0,cellStyle:row=>row.age<27?{color:"green"}:{color:"red"}},{key:"region",label:"区域",defaultValue:"暂无"},{key:"score",label:"分数",input:{disabled:row=>!row.editable,change:(newVal,oldVal,row)=>{console.log("分数改变:",newVal,row),setTimeout((()=>row.score=oldVal),500)}},width:200},{key:"address",label:"地址",children:[{key:"province",label:"省"},{key:"city",label:"市"}]},{key:"status",label:"状态",switch:{change:(val,row)=>console.log("状态改变:",val,row)}},{key:"images",label:"图片",type:"image",preview:!0,size:{width:"auto",height:80}},{label:"操作",width:200,buttons:[{text:"编辑",type:"primary",click:row=>console.log("编辑:",row),disabled:row=>!row.editable},{text:"删除",type:"danger",popconfirmText:"确认删除此记录？",click:row=>console.log("删除:",row)}]}],indexOffset:10};const __namedExportsOrder=["Basic"];Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:'args => ({\n  components: {\n    TabelPro\n  },\n  setup() {\n    const handleTagAdd = ({\n      row,\n      column,\n      value,\n      newValue\n    }) => {\n      console.log(\'添加标签:\', {\n        row,\n        column,\n        value,\n        newValue\n      });\n    };\n    const handleTagRemove = ({\n      row,\n      column,\n      index,\n      value,\n      newValue\n    }) => {\n      console.log(\'删除标签:\', {\n        row,\n        column,\n        index,\n        value,\n        newValue\n      });\n    };\n    return {\n      args,\n      handleTagAdd,\n      handleTagRemove\n    };\n  },\n  template: `\n    <TabelPro \n      v-bind="args" \n      @tag-add="handleTagAdd"\n      @tag-remove="handleTagRemove"\n    />\n  `\n})',...Basic.parameters?.docs?.source}}}},"./node_modules/.pnpm/css-loader@6.11.0_webpack@5.97.1_esbuild@0.24.0_/node_modules/css-loader/dist/cjs.js??clonedRuleSet-8.use[1]!./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/.pnpm/postcss-loader@8.1.1_postcss@8.4.49_typescript@5.7.2_webpack@5.97.1_esbuild@0.24.0_/node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[0]!./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/index.js??ruleSet[0]!./src/components/TabelPro.vue?vue&type=style&index=0&id=29858a42&scoped=true&lang=css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.97.1_esbuild@0.24.0_/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/css-loader@6.11.0_webpack@5.97.1_esbuild@0.24.0_/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_6_11_0_webpack_5_97_1_esbuild_0_24_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"\n.el-table[data-v-29858a42] {\n    width: 100%;\n}\n.input-wrapper[data-v-29858a42] {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n.input-wrapper .el-button + .el-button[data-v-29858a42] {\n    margin-left: 0;\n}\n.tags-wrapper[data-v-29858a42] {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 4px;\n    align-items: center;\n}\n.tags-wrapper .el-tag[data-v-29858a42] {\n    margin: 0;\n    cursor: default;\n}\n.tags-wrapper .el-tag.is-closable[data-v-29858a42] {\n    cursor: pointer;\n}\n.tag-input-wrapper[data-v-29858a42] {\n    width: 70px;\n    line-height: 24px;\n}\n.tag-input-wrapper .el-input[data-v-29858a42],\n  .tag-input-wrapper .el-button[data-v-29858a42] {\n    width: 100%;\n}\n","",{version:3,sources:["webpack://./src/components/TabelPro.vue"],names:[],mappings:";AAoaE;IACE,WAAW;AACb;AACA;IACE,aAAa;IACb,mBAAmB;IACnB,QAAQ;AACV;AACA;IACE,cAAc;AAChB;AACA;IACE,aAAa;IACb,eAAe;IACf,QAAQ;IACR,mBAAmB;AACrB;AACA;IACE,SAAS;IACT,eAAe;AACjB;AACA;IACE,eAAe;AACjB;AACA;IACE,WAAW;IACX,iBAAiB;AACnB;AACA;;IAEE,WAAW;AACb",sourcesContent:['<template>\n  <el-table\n    :data="listData"\n    style="width: 100%"\n    @selection-change="handleSelectionChange"\n  >\n    <template\n      v-for="column in config"\n      :key="column.key || column.type"\n    >\n      \x3c!-- Selection Column --\x3e\n      <el-table-column\n        v-if="column.type === \'selection\'"\n        type="selection"\n        :width="column.width"\n        :fixed="column.fixed"\n      />\n\n      \x3c!-- Index Column --\x3e\n      <el-table-column\n        v-else-if="column.type === \'index\'"\n        type="index"\n        :index="indexOffset || 0"\n        :label="column.label"\n        :width="column.width"\n        :fixed="column.fixed"\n      />\n\n      \x3c!-- Buttons Column --\x3e\n      <el-table-column\n        v-else-if="column.buttons"\n        :label="column.label"\n        :width="column.width"\n        :fixed="column.fixed"\n      >\n        <template #default="{ row }">\n          <template\n            v-for="(btn, index) in column.buttons"\n            :key="index"\n          >\n            <el-popconfirm\n              v-if="btn.popconfirmText"\n              :title="btn.popconfirmText"\n              @confirm="btn.click(row)"\n            >\n              <template #reference>\n                <el-button\n                  :type="btn.type"\n                  :disabled="btn.disabled?.(row)"\n                >\n                  {{ btn.text }}\n                </el-button>\n              </template>\n            </el-popconfirm>\n            <el-button\n              v-else\n              :type="btn.type"\n              :disabled="btn.disabled?.(row)"\n              @click="btn.click(row)"\n            >\n              {{ btn.text }}\n            </el-button>\n          </template>\n        </template>\n      </el-table-column>\n\n      \x3c!-- Image Column --\x3e\n      <el-table-column\n        v-else-if="column.type === \'image\'"\n        :prop="column.key"\n        :label="column.label"\n        :width="column.width"\n        :fixed="column.fixed"\n      >\n        <template #default="{ row }">\n          <el-image\n            v-if="column.key && row[column.key]"\n            :src="row[column.key]"\n            :preview-src-list="column.preview ? [row[column.key]] : []"\n            preview-teleported\n            :style="{\n              width: column.size?.width + \'px\',\n              height: column.size?.height + \'px\',\n            }"\n          />\n        </template>\n      </el-table-column>\n\n      \x3c!-- Custom Slot Column --\x3e\n      <el-table-column\n        v-else-if="column.slot"\n        :label="column.label"\n        :width="column.width"\n        :fixed="column.fixed"\n      >\n        <template #default="{ row }">\n          <slot\n            :name="column.slot"\n            :row="row"\n          />\n        </template>\n      </el-table-column>\n\n      \x3c!-- Nested Columns --\x3e\n      <template v-else-if="column.children">\n        <el-table-column\n          :label="column.label"\n          :width="column.width"\n          :align="column.align"\n          :fixed="column.fixed"\n        >\n          <template\n            v-for="child in column.children"\n            :key="child.key"\n          >\n            <el-table-column\n              :prop="child.key"\n              :label="child.label"\n              :width="child.width"\n            />\n          </template>\n        </el-table-column>\n      </template>\n\n      \x3c!-- Normal Column --\x3e\n      <el-table-column\n        v-else\n        :prop="column.key"\n        :label="column.label"\n        :width="column.width"\n        :align="column.align"\n        :sortable="column.sortable"\n        :filters="column.filters"\n        :filter-method="column.filterMethod"\n        :fixed="column.fixed"\n        v-show="!column.hidden"\n      >\n        <template\n          #default="{ row, $index }"\n          v-if="column.key"\n        >\n          <template v-if="column.switch">\n            <el-switch\n              v-model="row[column.key]"\n              @change="(val) => column.switch?.change(val, row)"\n            />\n          </template>\n          <div\n            class="input-wrapper"\n            v-else-if="column.input"\n          >\n            <el-input\n              v-model="row[column.key]"\n              :type="column.input?.type || \'text\'"\n              :placeholder="column.input?.placeholder || \'请输入\'"\n              :maxlength="column.input?.maxlength"\n              :show-word-limit="!!column.input?.maxlength"\n              :disabled="column.input?.disabled?.(row)"\n              @focus="column.key && !row[`${column.key}-old`] && (row[`${column.key}-old`] = row[column.key])"\n              @blur="\n                column.key &&\n                  row[`${column.key}-old`].toString() === row[column.key] &&\n                  (row[`${column.key}-old`] = undefined)\n              "\n            />\n            <template v-if="row[`${column.key}-old`] !== undefined && row[`${column.key}-old`] !== row[column.key]">\n              <el-button\n                type="primary"\n                size="small"\n                @click="column.input?.change(row[column.key], row[`${column.key}-old`], row)"\n                >确认</el-button\n              >\n              <el-button\n                size="small"\n                @click="row[column.key] = row[`${column.key}-old`]"\n                >取消</el-button\n              >\n            </template>\n          </div>\n          <template v-else-if="column.tag">\n            <div class="tags-wrapper">\n              <template v-if="Array.isArray(row[column.key])">\n                <template\n                  v-for="(value, index) in row[column.key]"\n                  :key="index"\n                >\n                  <el-tag\n                    :type="typeof column.tag.type === \'function\' ? column.tag.type(row, value) : column.tag.type"\n                    :effect="column.tag.effect || \'dark\'"\n                    :closable="column.tag.closable"\n                    @close="handleTagClose(row, column, index)"\n                  >\n                    {{ formatTagValue(value, column) }}\n                  </el-tag>\n                </template>\n                <div\n                  v-if="column.tag.addable"\n                  class="tag-input-wrapper"\n                >\n                  <el-input\n                    v-if="tempBooleans[getRowColumnKey(row, column, $index)]"\n                    :id="getRowColumnKey(row, column, $index)"\n                    v-model="tagInputValues[getRowColumnKey(row, column, $index)]"\n                    :placeholder="column.tag.addPlaceholder || \'请输入\'"\n                    size="small"\n                    @keyup.enter="handleTagAdd(row, column, $index)"\n                    @blur="handleTagInputBlur(row, column, $index)"\n                  />\n                  <el-button\n                    v-else\n                    size="small"\n                    @click="(event: MouseEvent)=>showTagInput(row, column, $index)"\n                  >\n                    + 新标签\n                  </el-button>\n                </div>\n              </template>\n              <template v-else>\n                <el-tag\n                  :type="\n                    typeof column.tag.type === \'function\' ? column.tag.type(row, row[column.key]) : column.tag.type\n                  "\n                  :effect="column.tag.effect || \'dark\'"\n                >\n                  {{ formatCellValue(row[column.key], column) }}\n                </el-tag>\n              </template>\n            </div>\n          </template>\n          <template v-else>\n            <span :style="column.cellStyle?.(row, column)">\n              {{ column.key ? formatCellValue(row[column.key], column) : \'\' }}\n            </span>\n          </template>\n        </template>\n      </el-table-column>\n    </template>\n  </el-table>\n</template>\n\n<script setup lang="ts">\n  import { ref, nextTick } from \'vue\';\n  import {\n    ElTable,\n    ElTableColumn,\n    ElButton,\n    ElSwitch,\n    ElImage,\n    ElTag,\n    ElInput,\n    ElPopconfirm,\n    ElMessage,\n  } from \'element-plus\';\n\n  type ButtonType = \'primary\' | \'success\' | \'warning\' | \'danger\' | \'info\' | \'text\' | \'default\';\n\n  type TagType = \'primary\' | \'success\' | \'warning\' | \'info\' | \'danger\';\n\n  interface TableColumn {\n    type?: \'selection\' | \'index\' | \'image\';\n    key?: string;\n    label?: string;\n    width?: number;\n    align?: \'left\' | \'center\' | \'right\';\n    hidden?: boolean;\n    sortable?: boolean;\n    filters?: { text: string; value: any }[];\n    filterMethod?: (value: any, row: Record<string, any>) => boolean;\n    colspan?: (row: Record<string, any>, column: TableColumn) => number;\n    dictionary?: Record<string | number, string>;\n    formatter?: (value: any) => string;\n    cellStyle?: (row: Record<string, any>, column: TableColumn) => Record<string, string>;\n    defaultValue?: string;\n    children?: TableColumn[];\n    switch?: {\n      change: (value: any, row: Record<string, any>) => void;\n    };\n    input?: {\n      type?: \'text\' | \'number\' | \'textarea\';\n      maxlength?: number;\n      placeholder?: string;\n      change: (newValue: any, oldValue: any, row: Record<string, any>) => void;\n      disabled?: (row: Record<string, any>) => boolean;\n    };\n    buttons?: {\n      text: string;\n      type: ButtonType;\n      click: (row: Record<string, any>) => void;\n      disabled?: (row: Record<string, any>) => boolean;\n      popconfirmText?: string;\n    }[];\n    slot?: string;\n    size?: { width: number; height: number };\n    preview?: boolean;\n    fixed?: boolean;\n    tag?: {\n      type?: TagType | ((row: Record<string, any>, value?: any) => TagType);\n      effect?: \'dark\' | \'light\' | \'plain\';\n      closable?: boolean;\n      addable?: boolean;\n      addPlaceholder?: string;\n      beforeAdd?: (value: string, row: Record<string, any>) => boolean | Promise<boolean>;\n      beforeRemove?: (index: number, value: any, row: Record<string, any>) => boolean | Promise<boolean>;\n      onAdd?: (value: string, row: Record<string, any>) => void;\n      onRemove?: (index: number, value: any, row: Record<string, any>) => void;\n    };\n  }\n\n  interface Props {\n    listData: Record<string, any>[];\n    config: TableColumn[];\n    indexOffset: number;\n  }\n\n  const props = withDefaults(defineProps<Props>(), {});\n  const emit = defineEmits([\'selection-change\']);\n\n  // Store input values for tag adding\n  const tagInputValues = ref<Record<string, string>>({});\n  const tempBooleans = ref<Record<string, boolean>>({});\n\n  const getRowColumnKey = (row: Record<string, any>, column: TableColumn, index: number) => {\n    return `${index}-${row.id || \'\'}-${column.key || \'\'}`;\n  };\n\n  const handleSelectionChange = (selection: Record<string, any>[]) => {\n    emit(\'selection-change\', selection);\n  };\n\n  const handleTagInputBlur = (row: Record<string, any>, column: TableColumn, index: number) => {\n    const inputKey = getRowColumnKey(row, column, index);\n    !tagInputValues.value[inputKey] && (tempBooleans.value[inputKey] = false);\n  };\n\n  const showTagInput = (row: Record<string, any>, column: TableColumn, index: number) => {\n    const inputKey = getRowColumnKey(row, column, index);\n    tempBooleans.value[inputKey] = true;\n    nextTick(() => {\n      const input = document.getElementById(inputKey) as HTMLInputElement;\n      input?.focus();\n    });\n  };\n\n  const handleTagClose = async (row: Record<string, any>, column: TableColumn, index: number) => {\n    if (!column.key) return;\n\n    const value = row[column.key][index];\n\n    if (column.tag?.beforeRemove) {\n      const canRemove = await column.tag.beforeRemove(index, value, row);\n      if (!canRemove) return;\n    }\n\n    const newValue = [...row[column.key]];\n    newValue.splice(index, 1);\n    row[column.key] = newValue;\n\n    column.tag?.onRemove?.(index, value, row);\n  };\n\n  const handleTagAdd = async (row: Record<string, any>, column: TableColumn, index: number) => {\n    if (!column.key) return;\n\n    const inputKey = getRowColumnKey(row, column, index);\n    const value = tagInputValues.value[inputKey]?.trim();\n\n    if (!value) return;\n\n    // Check for duplicate tags\n    if (Array.isArray(row[column.key]) && row[column.key].includes(value)) {\n      ElMessage.warning(\'标签已存在\');\n      return;\n    }\n\n    if (column.tag?.beforeAdd) {\n      const canAdd = await column.tag.beforeAdd(value, row);\n      if (!canAdd) return;\n    }\n\n    if (!Array.isArray(row[column.key])) {\n      row[column.key] = [];\n    }\n\n    const newValue = [...row[column.key], value];\n    row[column.key] = newValue;\n\n    column.tag?.onAdd?.(value, row);\n\n    // Clear input\n    tagInputValues.value[inputKey] = \'\';\n  };\n\n  const formatCellValue = (value: any, column: TableColumn) => {\n    if (value === undefined || value === null || value === \'\') {\n      return column.defaultValue || \'\';\n    }\n\n    if (column.dictionary && value in column.dictionary) {\n      return column.dictionary[value];\n    }\n\n    if (column.formatter) {\n      return column.formatter(value);\n    }\n\n    return value;\n  };\n\n  const formatTagValue = (value: any, column: TableColumn) => {\n    if (typeof value === \'object\' && value !== null) {\n      // If the value is an object, try to get a display property\n      return value.label || value.name || value.text || value.value || value.toString();\n    }\n    return formatCellValue(value, column);\n  };\n<\/script>\n\n<style scoped>\n  .el-table {\n    width: 100%;\n  }\n  .input-wrapper {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  .input-wrapper .el-button + .el-button {\n    margin-left: 0;\n  }\n  .tags-wrapper {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 4px;\n    align-items: center;\n  }\n  .tags-wrapper .el-tag {\n    margin: 0;\n    cursor: default;\n  }\n  .tags-wrapper .el-tag.is-closable {\n    cursor: pointer;\n  }\n  .tag-input-wrapper {\n    width: 70px;\n    line-height: 24px;\n  }\n  .tag-input-wrapper .el-input,\n  .tag-input-wrapper .el-button {\n    width: 100%;\n  }\n</style>\n'],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/.pnpm/vue-loader@16.8.3_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1_esbuild@0.24.0_/node_modules/vue-loader/dist/exportHelper.js":(__unused_webpack_module,exports)=>{exports.A=(sfc,props)=>{const target=sfc.__vccOpts||sfc;for(const[key,val]of props)target[key]=val;return target}}}]);